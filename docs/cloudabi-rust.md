<!--
Copyright (c) 2016 Nuxi (https://nuxi.nl/) and contributors.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions
are met:
1. Redistributions of source code must retain the above copyright
   notice, this list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright
   notice, this list of conditions and the following disclaimer in the
   documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
SUCH DAMAGE.

This file is automatically generated. Do not edit.

Source: https://github.com/NuxiNL/cloudabi
-->

# Nuxi CloudABI

CloudABI is what you get if you take POSIX, add capability-based
security, and remove everything that's incompatible with that. The
result is a minimal ABI consisting of only 58 syscalls.

CloudABI doesn't have its own kernel, but instead is implemented in existing
kernels: FreeBSD has CloudABI support for x86-64 and arm64, and [a patch-set
for NetBSD](https://github.com/NuxiNL/netbsd) and [a patch-set for
Linux](https://github.com/NuxiNL/linux) are available as well. This means that
CloudABI binaries can be executed on different operating systems, without any
modification.

## Capability-Based Security

Capability-based security means that processes can only perform
actions that have no global impact. Processes cannot open files by
their absolute path, cannot open network connections, and cannot
observe global system state such as the process table.

The capabilities of a process are fully determined by its set of open
file descriptors (fds). For example, files can only be opened if the
process already has a file descriptor to a directory the file is in.

Unlike in POSIX, where processes are normally started with file
descriptors 0, 1, and 2 reserved for standard input, output, and
error, CloudABI does not reserve any file descriptor numbers for
specific purposes.

In CloudABI, a process depends on its parent process to launch it with
the right set of resources, since the process will not be able to open
any new resources. For example, a simple static web server would need
to be started with an fd to a listening socket, and an fd to the
directory to serve files out of. The web server will then be unable to
do anything other than reading files in that directory, and accept
connections on the given socket.

So, unknown CloudABI binaries can safely be executed without the need
for containers, virtual machines, or other sandboxing techonologies.

Watch [Ed Schouten's Talk at
32C3](https://www.youtube.com/watch?v=62cYMmSY2Dc) for more
information about what capability-based security for UNIX means.

## Cloudlibc

[Cloudlibc](https://github.com/NuxiNL/cloudlibc) is an implementation
of the C standard library, without all CloudABI-incompatible
functions. For example, Cloudlibc does not have `printf`, but does
have `fprintf`.

## CloudABI-Ports

[CloudABI-Ports](https://github.com/NuxiNL/cloudabi-ports) is a
collection of ports of commonly used libraries and applications to
CloudABI. It contains software such as `zlib`, `libpng`, `boost`,
`memcached`, and much more. The software is patched to not depend on
any global state, such as files in `/etc` or `/dev`, using `open()`,
etc.

## Using CloudABI

Instructions for using CloudABI (including kernel modules/patches,
toolchain, and ports) are available for several operating systems:

- [Arch Linux](https://nuxi.nl/cloudabi/archlinux/)
- [Debian, Ubuntu, and other Debian derivatives](https://nuxi.nl/cloudabi/debian/)
- [FreeBSD, PC-BSD and DragonFly BSD](https://nuxi.nl/cloudabi/freebsd/)
- [Mac OS X](https://nuxi.nl/cloudabi/mac/)
- [NetBSD](https://nuxi.nl/cloudabi/netbsd/)

## Specification of the ABI

The entire ABI is specified in a a file called
[`cloudabi.txt`](https://github.com/NuxiNL/cloudabi/blob/master/cloudabi.txt),
from which all
[headers](https://github.com/NuxiNL/cloudabi/tree/master/headers)
and documentation (including the one you're reading now) is generated.

### System calls

- [`clock_res_get()`](#clock_res_get)
- [`clock_time_get()`](#clock_time_get)
- [`condvar_signal()`](#condvar_signal)
- [`fd_close()`](#fd_close)
- [`fd_create1()`](#fd_create1)
- [`fd_create2()`](#fd_create2)
- [`fd_datasync()`](#fd_datasync)
- [`fd_dup()`](#fd_dup)
- [`fd_pread()`](#fd_pread)
- [`fd_pwrite()`](#fd_pwrite)
- [`fd_read()`](#fd_read)
- [`fd_replace()`](#fd_replace)
- [`fd_seek()`](#fd_seek)
- [`fd_stat_get()`](#fd_stat_get)
- [`fd_stat_put()`](#fd_stat_put)
- [`fd_sync()`](#fd_sync)
- [`fd_write()`](#fd_write)
- [`file_advise()`](#file_advise)
- [`file_allocate()`](#file_allocate)
- [`file_create()`](#file_create)
- [`file_link()`](#file_link)
- [`file_open()`](#file_open)
- [`file_readdir()`](#file_readdir)
- [`file_readlink()`](#file_readlink)
- [`file_rename()`](#file_rename)
- [`file_stat_fget()`](#file_stat_fget)
- [`file_stat_fput()`](#file_stat_fput)
- [`file_stat_get()`](#file_stat_get)
- [`file_stat_put()`](#file_stat_put)
- [`file_symlink()`](#file_symlink)
- [`file_unlink()`](#file_unlink)
- [`lock_unlock()`](#lock_unlock)
- [`mem_advise()`](#mem_advise)
- [`mem_lock()`](#mem_lock)
- [`mem_map()`](#mem_map)
- [`mem_protect()`](#mem_protect)
- [`mem_sync()`](#mem_sync)
- [`mem_unlock()`](#mem_unlock)
- [`mem_unmap()`](#mem_unmap)
- [`poll()`](#poll)
- [`poll_fd()`](#poll_fd)
- [`proc_exec()`](#proc_exec)
- [`proc_exit()`](#proc_exit)
- [`proc_fork()`](#proc_fork)
- [`proc_raise()`](#proc_raise)
- [`random_get()`](#random_get)
- [`sock_accept()`](#sock_accept)
- [`sock_bind()`](#sock_bind)
- [`sock_connect()`](#sock_connect)
- [`sock_listen()`](#sock_listen)
- [`sock_recv()`](#sock_recv)
- [`sock_send()`](#sock_send)
- [`sock_shutdown()`](#sock_shutdown)
- [`sock_stat_get()`](#sock_stat_get)
- [`thread_create()`](#thread_create)
- [`thread_exit()`](#thread_exit)
- [`thread_yield()`](#thread_yield)

#### <a href="#clock_res_get" name="clock_res_get"></a>`clock_res_get()`

Obtains the resolution of a clock.

Inputs:

- <a href="#clock_res_get.clock_id" name="clock_res_get.clock_id"></a><code><strong>clock\_id</strong>: [clockid\_t](#clockid)</code>

    The clock for which the resolution needs to be
    returned.

Outputs:

- <a href="#clock_res_get.resolution" name="clock_res_get.resolution"></a><code><strong>resolution</strong>: [timestamp\_t](#timestamp)</code>

    The resolution of the clock.

#### <a href="#clock_time_get" name="clock_time_get"></a>`clock_time_get()`

Obtains the time value of a clock.

Inputs:

- <a href="#clock_time_get.clock_id" name="clock_time_get.clock_id"></a><code><strong>clock\_id</strong>: [clockid\_t](#clockid)</code>

    The clock for which the time needs to be
    returned.

- <a href="#clock_time_get.precision" name="clock_time_get.precision"></a><code><strong>precision</strong>: [timestamp\_t](#timestamp)</code>

    The maximum lag (exclusive) that the returned
    time value may have, compared to its actual
    value.

Outputs:

- <a href="#clock_time_get.time" name="clock_time_get.time"></a><code><strong>time</strong>: [timestamp\_t](#timestamp)</code>

    The time value of the clock.

#### <a href="#condvar_signal" name="condvar_signal"></a>`condvar_signal()`

Wakes up threads waiting on a userspace condition variable.

If an invocation of this system call causes all waiting
threads to be woken up, the value of the condition variable
is set to [`CONDVAR_HAS_NO_WAITERS`](#condvar.has_no_waiters). As long as the condition
variable is set to this value, it is not needed to invoke this
system call.

Inputs:

- <a href="#condvar_signal.condvar" name="condvar_signal.condvar"></a><code><strong>condvar</strong>: *mut [condvar\_t](#condvar)</code>

    The userspace condition variable that has
    waiting threads.

- <a href="#condvar_signal.scope" name="condvar_signal.scope"></a><code><strong>scope</strong>: [scope\_t](#scope)</code>

    Whether the condition variable is stored in
    private or shared memory.

- <a href="#condvar_signal.nwaiters" name="condvar_signal.nwaiters"></a><code><strong>nwaiters</strong>: [nthreads\_t](#nthreads)</code>

    The number of threads that need to be woken
    up. If it exceeds the number of waiting
    threads, all threads are woken up.

#### <a href="#fd_close" name="fd_close"></a>`fd_close()`

Closes a file descriptor.

Inputs:

- <a href="#fd_close.fd" name="fd_close.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor that needs to be closed.

#### <a href="#fd_create1" name="fd_create1"></a>`fd_create1()`

Creates a file descriptor.

Inputs:

- <a href="#fd_create1.type" name="fd_create1.type"></a><code><strong>type</strong>: [filetype\_t](#filetype)</code>

    Possible values:

    - [`FILETYPE_POLL`](#filetype.poll)

        Creates a polling event queue.

    - [`FILETYPE_SHARED_MEMORY`](#filetype.shared_memory)

        Creates an anonymous shared memory
        object.

    - [`FILETYPE_SOCKET_DGRAM`](#filetype.socket_dgram)

        Creates a UNIX datagram socket.

    - [`FILETYPE_SOCKET_SEQPACKET`](#filetype.socket_seqpacket)

        Creates a UNIX sequenced-packet
        socket.

    - [`FILETYPE_SOCKET_STREAM`](#filetype.socket_stream)

        Creates a UNIX byte-stream socket.

Outputs:

- <a href="#fd_create1.fd" name="fd_create1.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor that has been created.

#### <a href="#fd_create2" name="fd_create2"></a>`fd_create2()`

Creates a pair of file descriptors.

Inputs:

- <a href="#fd_create2.type" name="fd_create2.type"></a><code><strong>type</strong>: [filetype\_t](#filetype)</code>

    Possible values:

    - [`FILETYPE_FIFO`](#filetype.fifo)

        Creates a pipe.

    - [`FILETYPE_SOCKET_DGRAM`](#filetype.socket_dgram)

        Creates a UNIX datagram socket pair.

    - [`FILETYPE_SOCKET_SEQPACKET`](#filetype.socket_seqpacket)

        Creates a UNIX sequenced-packet socket
        pair.

    - [`FILETYPE_SOCKET_STREAM`](#filetype.socket_stream)

        Creates a UNIX byte-stream socket
        pair.

Outputs:

- <a href="#fd_create2.fd1" name="fd_create2.fd1"></a><code><strong>fd1</strong>: [fd\_t](#fd)</code>

    The first file descriptor of the pair. For
    pipes, this corresponds to the read end.

- <a href="#fd_create2.fd2" name="fd_create2.fd2"></a><code><strong>fd2</strong>: [fd\_t](#fd)</code>

    The second file descriptor of the pair. For
    pipes, this corresponds to the write end.

#### <a href="#fd_datasync" name="fd_datasync"></a>`fd_datasync()`

Synchronizes the data of a file to disk.

Inputs:

- <a href="#fd_datasync.fd" name="fd_datasync.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor of the file whose data
    needs to be synchronized to disk.

#### <a href="#fd_dup" name="fd_dup"></a>`fd_dup()`

Duplicates a file descriptor.

Inputs:

- <a href="#fd_dup.from" name="fd_dup.from"></a><code><strong>from</strong>: [fd\_t](#fd)</code>

    The file descriptor that needs to be
    duplicated.

Outputs:

- <a href="#fd_dup.fd" name="fd_dup.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The new file descriptor.

#### <a href="#fd_pread" name="fd_pread"></a>`fd_pread()`

Reads from a file descriptor, without using and updating the
file descriptor's offset.

Inputs:

- <a href="#fd_pread.fd" name="fd_pread.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor from which data should be
    read.

- <a href="#fd_pread.iov" name="fd_pread.iov"></a><code><strong>iov</strong>: * [iovec\_t](#iovec)</code> and <a href="#fd_pread.iovcnt" name="fd_pread.iovcnt"></a><code><strong>iovcnt</strong>: usize</code>

    List of scatter/gather vectors where data
    should be stored.

- <a href="#fd_pread.offset" name="fd_pread.offset"></a><code><strong>offset</strong>: [filesize\_t](#filesize)</code>

    The offset within the file at which reading
    should start.

Outputs:

- <a href="#fd_pread.nread" name="fd_pread.nread"></a><code><strong>nread</strong>: usize</code>

    The number of bytes read.

#### <a href="#fd_pwrite" name="fd_pwrite"></a>`fd_pwrite()`

Writes to a file descriptor, without using and updating the
file descriptor's offset.

Inputs:

- <a href="#fd_pwrite.fd" name="fd_pwrite.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor to which data should be
    written.

- <a href="#fd_pwrite.iov" name="fd_pwrite.iov"></a><code><strong>iov</strong>: * [ciovec\_t](#ciovec)</code> and <a href="#fd_pwrite.iovcnt" name="fd_pwrite.iovcnt"></a><code><strong>iovcnt</strong>: usize</code>

    List of scatter/gather vectors where data
    should be retrieved.

- <a href="#fd_pwrite.offset" name="fd_pwrite.offset"></a><code><strong>offset</strong>: [filesize\_t](#filesize)</code>

    The offset within the file at which writing
    should start.

Outputs:

- <a href="#fd_pwrite.nwritten" name="fd_pwrite.nwritten"></a><code><strong>nwritten</strong>: usize</code>

    The number of bytes written.

#### <a href="#fd_read" name="fd_read"></a>`fd_read()`

Reads from a file descriptor.

Inputs:

- <a href="#fd_read.fd" name="fd_read.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor from which data should be
    read.

- <a href="#fd_read.iov" name="fd_read.iov"></a><code><strong>iov</strong>: * [iovec\_t](#iovec)</code> and <a href="#fd_read.iovcnt" name="fd_read.iovcnt"></a><code><strong>iovcnt</strong>: usize</code>

    List of scatter/gather vectors where data
    should be stored.

Outputs:

- <a href="#fd_read.nread" name="fd_read.nread"></a><code><strong>nread</strong>: usize</code>

    The number of bytes read.

#### <a href="#fd_replace" name="fd_replace"></a>`fd_replace()`

Atomically replaces a file descriptor by a copy of another
file descriptor.

Due to the strong focus on thread safety, this environment
does not provide a mechanism to duplicate a file descriptor to
an arbitrary number, like dup2(). This would be prone to race
conditions, as an actual file descriptor with the same number
could be allocated by a different thread at the same time.

This system call provides a way to atomically replace file
descriptors, which would disappear if dup2() were to be
removed entirely.

Inputs:

- <a href="#fd_replace.from" name="fd_replace.from"></a><code><strong>from</strong>: [fd\_t](#fd)</code>

    The file descriptor that needs to be copied.

- <a href="#fd_replace.to" name="fd_replace.to"></a><code><strong>to</strong>: [fd\_t](#fd)</code>

    The file descriptor that needs to be
    overwritten.

#### <a href="#fd_seek" name="fd_seek"></a>`fd_seek()`

Moves the offset of the file descriptor.

Inputs:

- <a href="#fd_seek.fd" name="fd_seek.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor whose offset has to be
    moved.

- <a href="#fd_seek.offset" name="fd_seek.offset"></a><code><strong>offset</strong>: [filedelta\_t](#filedelta)</code>

    The number of bytes to move.

- <a href="#fd_seek.whence" name="fd_seek.whence"></a><code><strong>whence</strong>: [whence\_t](#whence)</code>

    Relative to which position the move should
    take place.

Outputs:

- <a href="#fd_seek.newoffset" name="fd_seek.newoffset"></a><code><strong>newoffset</strong>: [filesize\_t](#filesize)</code>

    The new offset of the file descriptor,
    relative to the start of the file.

#### <a href="#fd_stat_get" name="fd_stat_get"></a>`fd_stat_get()`

Gets attributes of a file descriptor.

Inputs:

- <a href="#fd_stat_get.fd" name="fd_stat_get.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor whose attributes have to
    be obtained.

- <a href="#fd_stat_get.buf" name="fd_stat_get.buf"></a><code><strong>buf</strong>: *mut [fdstat\_t](#fdstat)</code>

    The buffer where the file descriptor's
    attributes are stored.

#### <a href="#fd_stat_put" name="fd_stat_put"></a>`fd_stat_put()`

Adjusts attributes of a file descriptor.

Inputs:

- <a href="#fd_stat_put.fd" name="fd_stat_put.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor whose attributes have to
    be adjusted.

- <a href="#fd_stat_put.buf" name="fd_stat_put.buf"></a><code><strong>buf</strong>: * [fdstat\_t](#fdstat)</code>

    The desired values of the file descriptor
    attributes that are adjusted.

- <a href="#fd_stat_put.flags" name="fd_stat_put.flags"></a><code><strong>flags</strong>: [fdsflags\_t](#fdsflags)</code>

    A bitmask indicating which attributes have to
    be adjusted.

#### <a href="#fd_sync" name="fd_sync"></a>`fd_sync()`

Synchronizes the data and metadata of a file to disk.

Inputs:

- <a href="#fd_sync.fd" name="fd_sync.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor of the file whose data
    and metadata needs to be synchronized to disk.

#### <a href="#fd_write" name="fd_write"></a>`fd_write()`

Writes to a file descriptor.

Inputs:

- <a href="#fd_write.fd" name="fd_write.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor to which data should be
    written.

- <a href="#fd_write.iov" name="fd_write.iov"></a><code><strong>iov</strong>: * [ciovec\_t](#ciovec)</code> and <a href="#fd_write.iovcnt" name="fd_write.iovcnt"></a><code><strong>iovcnt</strong>: usize</code>

    List of scatter/gather vectors where data
    should be retrieved.

Outputs:

- <a href="#fd_write.nwritten" name="fd_write.nwritten"></a><code><strong>nwritten</strong>: usize</code>

    The number of bytes written.

#### <a href="#file_advise" name="file_advise"></a>`file_advise()`

Provides file advisory information on a file descriptor.

Inputs:

- <a href="#file_advise.fd" name="file_advise.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor for which to provide file
    advisory information.

- <a href="#file_advise.offset" name="file_advise.offset"></a><code><strong>offset</strong>: [filesize\_t](#filesize)</code>

    The offset within the file to which the
    advisory applies.

- <a href="#file_advise.len" name="file_advise.len"></a><code><strong>len</strong>: [filesize\_t](#filesize)</code>

    The length of the region to which the advisory
    applies.

- <a href="#file_advise.advice" name="file_advise.advice"></a><code><strong>advice</strong>: [advice\_t](#advice)</code>

    The advice.

#### <a href="#file_allocate" name="file_allocate"></a>`file_allocate()`

Forces the allocation of space in a file.

Inputs:

- <a href="#file_allocate.fd" name="file_allocate.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file in which the space should be
    allocated.

- <a href="#file_allocate.offset" name="file_allocate.offset"></a><code><strong>offset</strong>: [filesize\_t](#filesize)</code>

    The offset at which the allocation should
    start.

- <a href="#file_allocate.len" name="file_allocate.len"></a><code><strong>len</strong>: [filesize\_t](#filesize)</code>

    The length of the area that is allocated.

#### <a href="#file_create" name="file_create"></a>`file_create()`

Creates a file of a specified type.

Inputs:

- <a href="#file_create.fd" name="file_create.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The working directory at which the resolution
    of the file to be created starts.

- <a href="#file_create.path" name="file_create.path"></a><code><strong>path</strong>: * u8</code> and <a href="#file_create.pathlen" name="file_create.pathlen"></a><code><strong>pathlen</strong>: usize</code>

    The path at which the file should be created.

- <a href="#file_create.type" name="file_create.type"></a><code><strong>type</strong>: [filetype\_t](#filetype)</code>

    Possible values:

    - [`FILETYPE_DIRECTORY`](#filetype.directory)

        Creates a directory.

    - [`FILETYPE_FIFO`](#filetype.fifo)

        Creates a FIFO.

#### <a href="#file_link" name="file_link"></a>`file_link()`

Creates a hard link.

Inputs:

- <a href="#file_link.fd1" name="file_link.fd1"></a><code><strong>fd1</strong>: [lookup\_t](#lookup)</code>

    The working directory at which the resolution
    of the source path starts.

- <a href="#file_link.path1" name="file_link.path1"></a><code><strong>path1</strong>: * u8</code> and <a href="#file_link.path1len" name="file_link.path1len"></a><code><strong>path1len</strong>: usize</code>

    The source path of the file that should be
    hard linked.

- <a href="#file_link.fd2" name="file_link.fd2"></a><code><strong>fd2</strong>: [fd\_t](#fd)</code>

    The working directory at which the resolution
    of the destination path starts.

- <a href="#file_link.path2" name="file_link.path2"></a><code><strong>path2</strong>: * u8</code> and <a href="#file_link.path2len" name="file_link.path2len"></a><code><strong>path2len</strong>: usize</code>

    The destination path at which the hard link
    should be created.

#### <a href="#file_open" name="file_open"></a>`file_open()`

Opens a file.

Inputs:

- <a href="#file_open.dirfd" name="file_open.dirfd"></a><code><strong>dirfd</strong>: [lookup\_t](#lookup)</code>

    The working directory at which the resolution
    of the file to be opened starts.

- <a href="#file_open.path" name="file_open.path"></a><code><strong>path</strong>: * u8</code> and <a href="#file_open.pathlen" name="file_open.pathlen"></a><code><strong>pathlen</strong>: usize</code>

    The path of the file that should be opened.

- <a href="#file_open.oflags" name="file_open.oflags"></a><code><strong>oflags</strong>: [oflags\_t](#oflags)</code>

    The method at which the file should be opened.

- <a href="#file_open.fds" name="file_open.fds"></a><code><strong>fds</strong>: * [fdstat\_t](#fdstat)</code>

    [`fdstat_t.fs_rights_base`](#fdstat.fs_rights_base) and
    [`fdstat_t.fs_rights_inheriting`](#fdstat.fs_rights_inheriting) specify the
    initial rights of the newly created file
    descriptor. The operating system is allowed to
    return a file descriptor with fewer rights
    than specified, if and only if those rights do
    not apply to the type of file being opened.

    [`fdstat_t.fs_flags`](#fdstat.fs_flags) specifies the initial flags
    of the file descriptor.

    [`fdstat_t.fs_filetype`](#fdstat.fs_filetype) is ignored.

Outputs:

- <a href="#file_open.fd" name="file_open.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor of the file that has been
    opened.

#### <a href="#file_readdir" name="file_readdir"></a>`file_readdir()`

Reads directory entries from a directory.

When successful, the contents of the output buffer consist of
a sequence of directory entries. Each directory entry consists
of a [`dirent_t`](#dirent) object, followed by [`dirent_t.d_namlen`](#dirent.d_namlen) bytes
holding the name of the directory entry.

This system call fills the output buffer as much as possible,
potentially truncating the last directory entry. This allows
the caller to grow its read buffer size in case it's too small
to fit a single large directory entry, or skip the oversized
directory entry.

Inputs:

- <a href="#file_readdir.fd" name="file_readdir.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The directory from which to read the directory
    entries.

- <a href="#file_readdir.buf" name="file_readdir.buf"></a><code><strong>buf</strong>: *mut c\_void</code> and <a href="#file_readdir.nbyte" name="file_readdir.nbyte"></a><code><strong>nbyte</strong>: usize</code>

    The buffer where directory entries are stored.

- <a href="#file_readdir.cookie" name="file_readdir.cookie"></a><code><strong>cookie</strong>: [dircookie\_t](#dircookie)</code>

    The location within the directory to start
    reading.

Outputs:

- <a href="#file_readdir.bufused" name="file_readdir.bufused"></a><code><strong>bufused</strong>: usize</code>

    The number of bytes stored in the read buffer.
    If less than the size of the read buffer, the
    end of the directory has been reached.

#### <a href="#file_readlink" name="file_readlink"></a>`file_readlink()`

Reads the contents of a symbolic link.

Inputs:

- <a href="#file_readlink.fd" name="file_readlink.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The working directory at which the resolution
    of the path of the symbolic starts.

- <a href="#file_readlink.path" name="file_readlink.path"></a><code><strong>path</strong>: * u8</code> and <a href="#file_readlink.pathlen" name="file_readlink.pathlen"></a><code><strong>pathlen</strong>: usize</code>

    The path of the symbolic link whose contents
    should be read.

- <a href="#file_readlink.buf" name="file_readlink.buf"></a><code><strong>buf</strong>: *mut u8</code> and <a href="#file_readlink.bufsize" name="file_readlink.bufsize"></a><code><strong>bufsize</strong>: usize</code>

    The buffer where the contents of the symbolic
    link should be stored.

Outputs:

- <a href="#file_readlink.bufused" name="file_readlink.bufused"></a><code><strong>bufused</strong>: usize</code>

    The number of bytes placed in the buffer.

#### <a href="#file_rename" name="file_rename"></a>`file_rename()`

Renames a file.

Inputs:

- <a href="#file_rename.fd1" name="file_rename.fd1"></a><code><strong>fd1</strong>: [fd\_t](#fd)</code>

    The working directory at which the resolution
    of the source path starts.

- <a href="#file_rename.path1" name="file_rename.path1"></a><code><strong>path1</strong>: * u8</code> and <a href="#file_rename.path1len" name="file_rename.path1len"></a><code><strong>path1len</strong>: usize</code>

    The source path of the file that should be
    renamed.

- <a href="#file_rename.fd2" name="file_rename.fd2"></a><code><strong>fd2</strong>: [fd\_t](#fd)</code>

    The working directory at which the resolution
    of the destination path starts.

- <a href="#file_rename.path2" name="file_rename.path2"></a><code><strong>path2</strong>: * u8</code> and <a href="#file_rename.path2len" name="file_rename.path2len"></a><code><strong>path2len</strong>: usize</code>

    The destination path to which the file should
    be renamed.

#### <a href="#file_stat_fget" name="file_stat_fget"></a>`file_stat_fget()`

Gets attributes of a file by file descriptor.

Inputs:

- <a href="#file_stat_fget.fd" name="file_stat_fget.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor whose attributes have to
    be obtained.

- <a href="#file_stat_fget.buf" name="file_stat_fget.buf"></a><code><strong>buf</strong>: *mut [filestat\_t](#filestat)</code>

    The buffer where the file's attributes are
    stored.

#### <a href="#file_stat_fput" name="file_stat_fput"></a>`file_stat_fput()`

Adjusts attributes of a file by file descriptor.

Inputs:

- <a href="#file_stat_fput.fd" name="file_stat_fput.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The file descriptor whose attributes have to
    be adjusted.

- <a href="#file_stat_fput.buf" name="file_stat_fput.buf"></a><code><strong>buf</strong>: * [filestat\_t](#filestat)</code>

    The desired values of the file attributes that
    are adjusted.

- <a href="#file_stat_fput.flags" name="file_stat_fput.flags"></a><code><strong>flags</strong>: [fsflags\_t](#fsflags)</code>

    A bitmask indicating which attributes have to
    be adjusted.

#### <a href="#file_stat_get" name="file_stat_get"></a>`file_stat_get()`

Gets attributes of a file by path.

Inputs:

- <a href="#file_stat_get.fd" name="file_stat_get.fd"></a><code><strong>fd</strong>: [lookup\_t](#lookup)</code>

    The working directory at which the resolution
    of the path whose attributes have to be
    obtained starts.

- <a href="#file_stat_get.path" name="file_stat_get.path"></a><code><strong>path</strong>: * u8</code> and <a href="#file_stat_get.pathlen" name="file_stat_get.pathlen"></a><code><strong>pathlen</strong>: usize</code>

    The path of the file whose attributes have to
    be obtained.

- <a href="#file_stat_get.buf" name="file_stat_get.buf"></a><code><strong>buf</strong>: *mut [filestat\_t](#filestat)</code>

    The buffer where the file's attributes are
    stored.

#### <a href="#file_stat_put" name="file_stat_put"></a>`file_stat_put()`

Adjusts attributes of a file by path.

Inputs:

- <a href="#file_stat_put.fd" name="file_stat_put.fd"></a><code><strong>fd</strong>: [lookup\_t](#lookup)</code>

    The working directory at which the resolution
    of the path whose attributes have to be
    adjusted starts.

- <a href="#file_stat_put.path" name="file_stat_put.path"></a><code><strong>path</strong>: * u8</code> and <a href="#file_stat_put.pathlen" name="file_stat_put.pathlen"></a><code><strong>pathlen</strong>: usize</code>

    The path of the file whose attributes have to
    be adjusted.

- <a href="#file_stat_put.buf" name="file_stat_put.buf"></a><code><strong>buf</strong>: * [filestat\_t](#filestat)</code>

    The desired values of the file attributes that
    are adjusted.

- <a href="#file_stat_put.flags" name="file_stat_put.flags"></a><code><strong>flags</strong>: [fsflags\_t](#fsflags)</code>

    A bitmask indicating which attributes have to
    be adjusted.

#### <a href="#file_symlink" name="file_symlink"></a>`file_symlink()`

Creates a symbolic link.

Inputs:

- <a href="#file_symlink.path1" name="file_symlink.path1"></a><code><strong>path1</strong>: * u8</code> and <a href="#file_symlink.path1len" name="file_symlink.path1len"></a><code><strong>path1len</strong>: usize</code>

    The contents of the symbolic link.

- <a href="#file_symlink.fd" name="file_symlink.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The working directory at which the resolution
    of the destination path starts.

- <a href="#file_symlink.path2" name="file_symlink.path2"></a><code><strong>path2</strong>: * u8</code> and <a href="#file_symlink.path2len" name="file_symlink.path2len"></a><code><strong>path2len</strong>: usize</code>

    The destination path at which the symbolic
    link should be created.

#### <a href="#file_unlink" name="file_unlink"></a>`file_unlink()`

Unlinks a file, or removes a directory.

Inputs:

- <a href="#file_unlink.fd" name="file_unlink.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The working directory at which the resolution
    of the path starts.

- <a href="#file_unlink.path" name="file_unlink.path"></a><code><strong>path</strong>: * u8</code> and <a href="#file_unlink.pathlen" name="file_unlink.pathlen"></a><code><strong>pathlen</strong>: usize</code>

    The path that needs to be unlinked or removed.

- <a href="#file_unlink.flags" name="file_unlink.flags"></a><code><strong>flags</strong>: [ulflags\_t](#ulflags)</code>

    Possible values:

    - [`UNLINK_REMOVEDIR`](#ulflags.removedir)

        If set, attempt to remove a directory.
        Otherwise, unlink a file.

#### <a href="#lock_unlock" name="lock_unlock"></a>`lock_unlock()`

Unlocks a write-locked userspace lock.

If a userspace lock is unlocked while having its
[`LOCK_KERNEL_MANAGED`](#lock.kernel_managed) flag set, the lock cannot be unlocked in
userspace directly. This system call needs to be performed
instead, so that any waiting threads can be woken up.

To prevent spurious invocations of this system call, the lock
must be locked for writing. This prevents other threads from
acquiring additional read locks while the system call is in
progress. If the lock is acquired for reading, it must first
be upgraded to a write lock.

Inputs:

- <a href="#lock_unlock.lock" name="lock_unlock.lock"></a><code><strong>lock</strong>: *mut [lock\_t](#lock)</code>

    The userspace lock that is locked for writing
    by the calling thread.

- <a href="#lock_unlock.scope" name="lock_unlock.scope"></a><code><strong>scope</strong>: [scope\_t](#scope)</code>

    Whether the lock is stored in private or
    shared memory.

#### <a href="#mem_advise" name="mem_advise"></a>`mem_advise()`

Provides memory advisory information on a region of memory.

Inputs:

- <a href="#mem_advise.addr" name="mem_advise.addr"></a><code><strong>addr</strong>: *mut c\_void</code> and <a href="#mem_advise.len" name="mem_advise.len"></a><code><strong>len</strong>: usize</code>

    The pages for which to provide memory advisory
    information.

- <a href="#mem_advise.advice" name="mem_advise.advice"></a><code><strong>advice</strong>: [advice\_t](#advice)</code>

    The advice.

#### <a href="#mem_lock" name="mem_lock"></a>`mem_lock()`

Increments the lock count on a region of memory, which
prevents it from leaving system memory.

Inputs:

- <a href="#mem_lock.addr" name="mem_lock.addr"></a><code><strong>addr</strong>: * c\_void</code> and <a href="#mem_lock.len" name="mem_lock.len"></a><code><strong>len</strong>: usize</code>

    The pages that need its lock count
    incremented.

#### <a href="#mem_map" name="mem_map"></a>`mem_map()`

Creates a memory mapping, making the contents of a file
accessible through memory.

Inputs:

- <a href="#mem_map.addr" name="mem_map.addr"></a><code><strong>addr</strong>: *mut c\_void</code>

    If [`MAP_FIXED`](#mflags.fixed) is set, specifies to which
    address the file region is mapped. Otherwise,
    the mapping is performed at an unused
    location.

- <a href="#mem_map.len" name="mem_map.len"></a><code><strong>len</strong>: usize</code>

    The length of the memory mapping to be
    created.

- <a href="#mem_map.prot" name="mem_map.prot"></a><code><strong>prot</strong>: [mprot\_t](#mprot)</code>

    Initial memory protection options for the
    memory mapping.

- <a href="#mem_map.flags" name="mem_map.flags"></a><code><strong>flags</strong>: [mflags\_t](#mflags)</code>

    Memory mapping flags.

- <a href="#mem_map.fd" name="mem_map.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    If [`MAP_ANON`](#mflags.anon) is set, this argument must be
    [`MAP_ANON_FD`](#fd.map_anon_fd). Otherwise, this argument
    specifies the file whose contents need to be
    mapped.

- <a href="#mem_map.off" name="mem_map.off"></a><code><strong>off</strong>: [filesize\_t](#filesize)</code>

    If [`MAP_ANON`](#mflags.anon) is set, this argument must be
    zero. Otherwise, this argument specifies the
    offset within the file at which the mapping
    starts.

Outputs:

- <a href="#mem_map.mem" name="mem_map.mem"></a><code><strong>mem</strong>: *mut c\_void</code>

    The starting address of the memory mapping.

#### <a href="#mem_protect" name="mem_protect"></a>`mem_protect()`

Change the protection of a memory mapping.

Inputs:

- <a href="#mem_protect.addr" name="mem_protect.addr"></a><code><strong>addr</strong>: *mut c\_void</code> and <a href="#mem_protect.len" name="mem_protect.len"></a><code><strong>len</strong>: usize</code>

    The pages that need their protection changed.

- <a href="#mem_protect.prot" name="mem_protect.prot"></a><code><strong>prot</strong>: [mprot\_t](#mprot)</code>

    New protection options.

#### <a href="#mem_sync" name="mem_sync"></a>`mem_sync()`

Synchronize a region of memory with its physical storage.

Inputs:

- <a href="#mem_sync.addr" name="mem_sync.addr"></a><code><strong>addr</strong>: *mut c\_void</code> and <a href="#mem_sync.len" name="mem_sync.len"></a><code><strong>len</strong>: usize</code>

    The pages that need to be synchronized.

- <a href="#mem_sync.flags" name="mem_sync.flags"></a><code><strong>flags</strong>: [msflags\_t](#msflags)</code>

    The method of synchronization.

#### <a href="#mem_unlock" name="mem_unlock"></a>`mem_unlock()`

Decrements the lock count on a region of memory, which
prevents it from leaving system memory.

Inputs:

- <a href="#mem_unlock.addr" name="mem_unlock.addr"></a><code><strong>addr</strong>: * c\_void</code> and <a href="#mem_unlock.len" name="mem_unlock.len"></a><code><strong>len</strong>: usize</code>

    The pages that need its lock count
    decremented.

#### <a href="#mem_unmap" name="mem_unmap"></a>`mem_unmap()`

Unmaps a region of memory.

Inputs:

- <a href="#mem_unmap.addr" name="mem_unmap.addr"></a><code><strong>addr</strong>: *mut c\_void</code> and <a href="#mem_unmap.len" name="mem_unmap.len"></a><code><strong>len</strong>: usize</code>

    The pages that needs to be unmapped.

#### <a href="#poll" name="poll"></a>`poll()`

Concurrently polls for the occurrence of a set of events.

Inputs:

- <a href="#poll.in" name="poll.in"></a><code><strong>in</strong>: * [subscription\_t](#subscription)</code>

    The events to which to subscribe.

- <a href="#poll.out" name="poll.out"></a><code><strong>out</strong>: *mut [event\_t](#event)</code>

    The events that have occurred.

- <a href="#poll.nsubscriptions" name="poll.nsubscriptions"></a><code><strong>nsubscriptions</strong>: usize</code>

    Both the number of subscriptions and events.

Outputs:

- <a href="#poll.nevents" name="poll.nevents"></a><code><strong>nevents</strong>: usize</code>

    The number of events stored.

#### <a href="#poll_fd" name="poll_fd"></a>`poll_fd()`

Concurrently polls for the occurrence of a set of events,
while retaining subscriptions across calls.

Inputs:

- <a href="#poll_fd.fd" name="poll_fd.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The polling event queue.

- <a href="#poll_fd.in" name="poll_fd.in"></a><code><strong>in</strong>: * [subscription\_t](#subscription)</code> and <a href="#poll_fd.nin" name="poll_fd.nin"></a><code><strong>nin</strong>: usize</code>

    Changes that need to be made to the polling
    event queue.

- <a href="#poll_fd.out" name="poll_fd.out"></a><code><strong>out</strong>: *mut [event\_t](#event)</code> and <a href="#poll_fd.nout" name="poll_fd.nout"></a><code><strong>nout</strong>: usize</code>

    The events that have occurred.

- <a href="#poll_fd.timeout" name="poll_fd.timeout"></a><code><strong>timeout</strong>: * [subscription\_t](#subscription)</code>

    Subscription of type [`EVENTTYPE_CLOCK`](#eventtype.clock) to
    serve as a timeout for the system call. The
    subscription is local to this invocation of
    this system call and is automatically purged
    upon completion.

Outputs:

- <a href="#poll_fd.nevents" name="poll_fd.nevents"></a><code><strong>nevents</strong>: usize</code>

    The number of events stored.

#### <a href="#proc_exec" name="proc_exec"></a>`proc_exec()`

Replaces the process by a new executable.

Process execution in CloudABI differs from POSIX in two ways:
handling of arguments and inheritance of file descriptors.

CloudABI does not use string command line arguments. A buffer
with binary data is copied into the new executable instead.
The kernel does not enforce any specific structure to this
data, although CloudABI's C library uses it to store a tree
structure that is semantically identical to YAML.

Due to the strong focus on thread safety, file descriptors
aren't inherited through close-on-exec flags. An explicit
list of file descriptors that need to be retained needs to be
provided. After execution, file descriptors are placed in the
order in which they are stored in the array. This not only
makes the execution process deterministic. It also prevents
potential information disclosures about the layout of the
original process.

Inputs:

- <a href="#proc_exec.fd" name="proc_exec.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    A file descriptor of the new executable.

- <a href="#proc_exec.data" name="proc_exec.data"></a><code><strong>data</strong>: * c\_void</code> and <a href="#proc_exec.datalen" name="proc_exec.datalen"></a><code><strong>datalen</strong>: usize</code>

    Binary argument data that is passed on to the
    new executable.

- <a href="#proc_exec.fds" name="proc_exec.fds"></a><code><strong>fds</strong>: * [fd\_t](#fd)</code> and <a href="#proc_exec.fdslen" name="proc_exec.fdslen"></a><code><strong>fdslen</strong>: usize</code>

    The layout of the file descriptor table after
    execution.

#### <a href="#proc_exit" name="proc_exit"></a>`proc_exit()`

Terminates the process normally.

Inputs:

- <a href="#proc_exit.rval" name="proc_exit.rval"></a><code><strong>rval</strong>: [exitcode\_t](#exitcode)</code>

    The exit code returned by the process. The
    exit code can be obtained by other processes
    through [`event_t.proc_terminate().exitcode`](#event.proc_terminate.exitcode).

Does not return.

#### <a href="#proc_fork" name="proc_fork"></a>`proc_fork()`

Forks the process of the calling thread.

After forking, a new process shall be created, having only a
copy of the calling thread. The parent process will obtain a
process descriptor. When closed, the child process is
automatically signalled with [`SIGKILL`](#signal.kill).

Outputs:

- <a href="#proc_fork.fd" name="proc_fork.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    In the parent process: the file descriptor
    number of the process descriptor.

    In the child process: [`PROCESS_CHILD`](#fd.process_child).

- <a href="#proc_fork.tid" name="proc_fork.tid"></a><code><strong>tid</strong>: [tid\_t](#tid)</code>

    In the parent process: undefined.

    In the child process: the thread ID of the
    initial thread of the child process.

#### <a href="#proc_raise" name="proc_raise"></a>`proc_raise()`

Sends a signal to the process of the calling thread.

Inputs:

- <a href="#proc_raise.sig" name="proc_raise.sig"></a><code><strong>sig</strong>: [signal\_t](#signal)</code>

    The signal condition that should be triggered.
    If the signal causes the process to terminate,
    its condition can be obtained by other
    processes through
    [`event_t.proc_terminate().signal`](#event.proc_terminate.signal).

#### <a href="#random_get" name="random_get"></a>`random_get()`

Obtains random data from the kernel random number generator.

As this interface is not guaranteed to be fast, it is advised
that the random data obtained through this system call is used
as the seed for a userspace pseudo-random number generator.

Inputs:

- <a href="#random_get.buf" name="random_get.buf"></a><code><strong>buf</strong>: *mut c\_void</code> and <a href="#random_get.nbyte" name="random_get.nbyte"></a><code><strong>nbyte</strong>: usize</code>

    The buffer that needs to be filled with random
    data.

#### <a href="#sock_accept" name="sock_accept"></a>`sock_accept()`

Accepts an incoming connection on a listening socket.

Inputs:

- <a href="#sock_accept.sock" name="sock_accept.sock"></a><code><strong>sock</strong>: [fd\_t](#fd)</code>

    The file descriptor of the listening socket.

- <a href="#sock_accept.buf" name="sock_accept.buf"></a><code><strong>buf</strong>: *mut [sockstat\_t](#sockstat)</code>

    The attributes of the socket associated with
    the incoming connection.

Outputs:

- <a href="#sock_accept.conn" name="sock_accept.conn"></a><code><strong>conn</strong>: [fd\_t](#fd)</code>

    The socket associated with the incoming
    connection.

#### <a href="#sock_bind" name="sock_bind"></a>`sock_bind()`

Binds a UNIX socket to a path.

Inputs:

- <a href="#sock_bind.sock" name="sock_bind.sock"></a><code><strong>sock</strong>: [fd\_t](#fd)</code>

    The file descriptor of the socket to be bound.

- <a href="#sock_bind.fd" name="sock_bind.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The working directory at which the resolution
    of the path to which to bind starts.

- <a href="#sock_bind.path" name="sock_bind.path"></a><code><strong>path</strong>: * u8</code> and <a href="#sock_bind.pathlen" name="sock_bind.pathlen"></a><code><strong>pathlen</strong>: usize</code>

    The path to which the socket should bind.

#### <a href="#sock_connect" name="sock_connect"></a>`sock_connect()`

Connects a UNIX socket to another UNIX socket bound at a path.

Inputs:

- <a href="#sock_connect.sock" name="sock_connect.sock"></a><code><strong>sock</strong>: [fd\_t](#fd)</code>

    The file descriptor of the socket to connect.

- <a href="#sock_connect.fd" name="sock_connect.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The working directory at which the resolution
    of the path to which to connect starts.

- <a href="#sock_connect.path" name="sock_connect.path"></a><code><strong>path</strong>: * u8</code> and <a href="#sock_connect.pathlen" name="sock_connect.pathlen"></a><code><strong>pathlen</strong>: usize</code>

    The path to which the socket should onnect.

#### <a href="#sock_listen" name="sock_listen"></a>`sock_listen()`

Listens for incoming connections on a socket.

Inputs:

- <a href="#sock_listen.sock" name="sock_listen.sock"></a><code><strong>sock</strong>: [fd\_t](#fd)</code>

    The socket on which listening should be
    enabled.

- <a href="#sock_listen.backlog" name="sock_listen.backlog"></a><code><strong>backlog</strong>: [backlog\_t](#backlog)</code>

    Number of incoming connections the socket is
    capable of keeping in its backlog.

#### <a href="#sock_recv" name="sock_recv"></a>`sock_recv()`

Receives a message on a socket.

Inputs:

- <a href="#sock_recv.sock" name="sock_recv.sock"></a><code><strong>sock</strong>: [fd\_t](#fd)</code>

    The socket on which a message should be
    received.

- <a href="#sock_recv.in" name="sock_recv.in"></a><code><strong>in</strong>: * [recv\_in\_t](#recv\_in)</code>

    Input parameters.

- <a href="#sock_recv.out" name="sock_recv.out"></a><code><strong>out</strong>: *mut [recv\_out\_t](#recv\_out)</code>

    Output parameters.

#### <a href="#sock_send" name="sock_send"></a>`sock_send()`

Sends a message on a socket.

Inputs:

- <a href="#sock_send.sock" name="sock_send.sock"></a><code><strong>sock</strong>: [fd\_t](#fd)</code>

    The socket on which a message should be sent.

- <a href="#sock_send.in" name="sock_send.in"></a><code><strong>in</strong>: * [send\_in\_t](#send\_in)</code>

    Input parameters.

- <a href="#sock_send.out" name="sock_send.out"></a><code><strong>out</strong>: *mut [send\_out\_t](#send\_out)</code>

    Output parameters.

#### <a href="#sock_shutdown" name="sock_shutdown"></a>`sock_shutdown()`

Shuts down socket send and receive channels.

Inputs:

- <a href="#sock_shutdown.sock" name="sock_shutdown.sock"></a><code><strong>sock</strong>: [fd\_t](#fd)</code>

    The socket that needs its channels shut down.

- <a href="#sock_shutdown.how" name="sock_shutdown.how"></a><code><strong>how</strong>: [sdflags\_t](#sdflags)</code>

    Which channels on the socket need to be shut
    down.

#### <a href="#sock_stat_get" name="sock_stat_get"></a>`sock_stat_get()`

Gets attributes of a socket.

Inputs:

- <a href="#sock_stat_get.sock" name="sock_stat_get.sock"></a><code><strong>sock</strong>: [fd\_t](#fd)</code>

    The socket whose attributes have to be
    obtained.

- <a href="#sock_stat_get.buf" name="sock_stat_get.buf"></a><code><strong>buf</strong>: *mut [sockstat\_t](#sockstat)</code>

    The buffer where the socket's attributes are
    stored.

- <a href="#sock_stat_get.flags" name="sock_stat_get.flags"></a><code><strong>flags</strong>: [ssflags\_t](#ssflags)</code>

    Flags indicating how the existing socket
    attributes need to be changed.

#### <a href="#thread_create" name="thread_create"></a>`thread_create()`

Creates a new thread within the current process.

Inputs:

- <a href="#thread_create.attr" name="thread_create.attr"></a><code><strong>attr</strong>: *mut [threadattr\_t](#threadattr)</code>

    The desired attributes of the new thread.

Outputs:

- <a href="#thread_create.tid" name="thread_create.tid"></a><code><strong>tid</strong>: [tid\_t](#tid)</code>

    The thread ID of the new thread.

#### <a href="#thread_exit" name="thread_exit"></a>`thread_exit()`

Terminates the calling thread.

This system call can also unlock a single userspace lock
after termination, which can be used to implement thread
joining.

Inputs:

- <a href="#thread_exit.lock" name="thread_exit.lock"></a><code><strong>lock</strong>: *mut [lock\_t](#lock)</code>

    Userspace lock that is locked for writing by
    the calling thread.

- <a href="#thread_exit.scope" name="thread_exit.scope"></a><code><strong>scope</strong>: [scope\_t](#scope)</code>

    Whether the lock is stored in private or
    shared memory.

Does not return.

#### <a href="#thread_yield" name="thread_yield"></a>`thread_yield()`

Temporarily yields execution of the calling thread.

### Types

#### <a href="#advice" name="advice"></a>`advice_t` (`u8`)

File or memory access pattern advisory information.

Used by [`file_advise()`](#file_advise) and [`mem_advise()`](#mem_advise).

Possible values:

- <a href="#advice.dontneed" name="advice.dontneed"></a>**`ADVICE_DONTNEED`**

    The application expects that it will not access the
    specified data in the near future.

- <a href="#advice.noreuse" name="advice.noreuse"></a>**`ADVICE_NOREUSE`**

    The application expects to access the specified data
    once and then not reuse it thereafter.

- <a href="#advice.normal" name="advice.normal"></a>**`ADVICE_NORMAL`**

    The application has no advice to give on its behavior
    with respect to the specified data.

- <a href="#advice.random" name="advice.random"></a>**`ADVICE_RANDOM`**

    The application expects to access the specified data
    in a random order.

- <a href="#advice.sequential" name="advice.sequential"></a>**`ADVICE_SEQUENTIAL`**

    The application expects to access the specified data
    sequentially from lower offsets to higher offsets.

- <a href="#advice.willneed" name="advice.willneed"></a>**`ADVICE_WILLNEED`**

    The application expects to access the specified data
    in the near future.

#### <a href="#auxtype" name="auxtype"></a>`auxtype_t` (`u32`)

Enumeration describing the kind of value stored in [`auxv_t`](#auxv).

Possible values:

- <a href="#auxtype.argdata" name="auxtype.argdata"></a>**`AT_ARGDATA`**

    Base address of the binary argument data provided to
    [`proc_exec()`](#proc_exec).

- <a href="#auxtype.argdatalen" name="auxtype.argdatalen"></a>**`AT_ARGDATALEN`**

    Length of the binary argument data provided to
    [`proc_exec()`](#proc_exec).

- <a href="#auxtype.base" name="auxtype.base"></a>**`AT_BASE`**

    Base address at which the executable is placed in
    memory.

- <a href="#auxtype.canary" name="auxtype.canary"></a>**`AT_CANARY`**

    Base address of a buffer of random data that may be
    used for non-cryptographic purposes, for example as a
    canary for stack smashing protection.

- <a href="#auxtype.canarylen" name="auxtype.canarylen"></a>**`AT_CANARYLEN`**

    Length of a buffer of random data that may be used
    for non-cryptographic purposes, for example as a
    canary for stack smashing protection.

- <a href="#auxtype.ncpus" name="auxtype.ncpus"></a>**`AT_NCPUS`**

    Number of CPUs that the system this process is running
    on has.

- <a href="#auxtype.null" name="auxtype.null"></a>**`AT_NULL`**

    Terminator of the auxiliary vector.

- <a href="#auxtype.pagesz" name="auxtype.pagesz"></a>**`AT_PAGESZ`**

    Smallest memory object size for which individual
    memory protection controls can be configured.

- <a href="#auxtype.phdr" name="auxtype.phdr"></a>**`AT_PHDR`**

    Address of the first ELF program header of the
    executable.

- <a href="#auxtype.phnum" name="auxtype.phnum"></a>**`AT_PHNUM`**

    Number of ELF program headers of the executable.

- <a href="#auxtype.sysinfo_ehdr" name="auxtype.sysinfo_ehdr"></a>**`AT_SYSINFO_EHDR`**

    Address of the ELF header of the vDSO.

    The vDSO is a shared library that is mapped in the
    address space of the process. It provides entry points
    for every system call supported by the environment,
    all having a corresponding symbol that is prefixed
    with `cloudabi_sys_`. System calls should be invoked
    through these entry points.

    The first advantage of letting processes call into a
    vDSO to perform system calls instead of raising
    hardware traps is that it allows for easy emulation of
    executables on top of existing operating systems. The
    second advantage is that in cases where an operating
    system provides native support for CloudABI executables,
    it may still implement partial userspace
    implementations of these system calls to improve
    performance (e.g., [`clock_time_get()`](#clock_time_get)). It also provides
    a more dynamic way of adding, removing or replacing
    system calls.

- <a href="#auxtype.tid" name="auxtype.tid"></a>**`AT_TID`**

    Thread ID of the initial thread of the process.

#### <a href="#auxv" name="auxv"></a>`auxv_t` (`struct`)

Auxiliary vector entry.

The auxiliary vector is a list of key-value pairs that is
provided to the process on startup. Unlike structures, it is
extensible, as it is possible to add new records later on.
The auxiliary vector is always terminated by an entry having
type [`AT_NULL`](#auxtype.null).

The auxiliary vector is part of the x86-64 ABI, but is used by
this environment on all architectures.

Used by [`processentry_t`](#processentry).

Members:

- <a href="#auxv.a_type" name="auxv.a_type"></a><code><strong>a\_type</strong>: [auxtype\_t](#auxtype)</code>

    The type of the auxiliary vector entry.

- When `a_type` is [`AT_ARGDATALEN`](#auxtype.argdatalen), [`AT_CANARYLEN`](#auxtype.canarylen), [`AT_NCPUS`](#auxtype.ncpus), [`AT_PAGESZ`](#auxtype.pagesz), [`AT_PHNUM`](#auxtype.phnum), or [`AT_TID`](#auxtype.tid):

    - <a href="#auxv.a_val" name="auxv.a_val"></a><code><strong>a\_val()</strong>: usize</code>

        A numerical value.

- When `a_type` is [`AT_ARGDATA`](#auxtype.argdata), [`AT_BASE`](#auxtype.base), [`AT_CANARY`](#auxtype.canary), [`AT_PHDR`](#auxtype.phdr), or [`AT_SYSINFO_EHDR`](#auxtype.sysinfo_ehdr):

    - <a href="#auxv.a_ptr" name="auxv.a_ptr"></a><code><strong>a\_ptr()</strong>: *mut c\_void</code>

        A pointer value.

#### <a href="#backlog" name="backlog"></a>`backlog_t` (`u32`)

Number of incoming connections a socket is capable of keeping
in its backlog.

Used by [`sock_listen()`](#sock_listen).

#### <a href="#ciovec" name="ciovec"></a>`ciovec_t` (`struct`)

A region of memory for scatter/gather writes.

Used by [`send_in_t`](#send_in), [`fd_pwrite()`](#fd_pwrite), and [`fd_write()`](#fd_write).

Members:

- <a href="#ciovec.iov_base" name="ciovec.iov_base"></a><code><strong>iov\_base</strong>: * c\_void</code> and <a href="#ciovec.iov_len" name="ciovec.iov_len"></a><code><strong>iov\_len</strong>: usize</code>

    The address and length of the buffer to be written.

#### <a href="#clockid" name="clockid"></a>`clockid_t` (`u32`)

Identifiers for clocks.

Used by [`subscription_t`](#subscription), [`clock_res_get()`](#clock_res_get), and [`clock_time_get()`](#clock_time_get).

Possible values:

- <a href="#clockid.monotonic" name="clockid.monotonic"></a>**`CLOCK_MONOTONIC`**

    The system-wide monotonic clock, which is defined as a
    clock measuring real time, whose value cannot be
    adjusted and which cannot have negative clock jumps.

    The epoch of this clock is undefined. The absolute
    time value of this clock therefore has no meaning.

- <a href="#clockid.process_cputime_id" name="clockid.process_cputime_id"></a>**`CLOCK_PROCESS_CPUTIME_ID`**

    The CPU-time clock associated with the current
    process.

- <a href="#clockid.realtime" name="clockid.realtime"></a>**`CLOCK_REALTIME`**

    The system-wide clock measuring real time. Time value
    zero corresponds with 1970-01-01T00:00:00Z.

- <a href="#clockid.thread_cputime_id" name="clockid.thread_cputime_id"></a>**`CLOCK_THREAD_CPUTIME_ID`**

    The CPU-time clock associated with the current thread.

#### <a href="#condvar" name="condvar"></a>`condvar_t` (`u32`)

A userspace condition variable.

Used by [`event_t`](#event), [`subscription_t`](#subscription), and [`condvar_signal()`](#condvar_signal).

Special values:

- <a href="#condvar.has_no_waiters" name="condvar.has_no_waiters"></a>**`CONDVAR_HAS_NO_WAITERS`**

    The condition variable is in its initial state. There
    are no threads waiting to be woken up. If the
    condition variable has any other value, the kernel
    must be called to wake up any sleeping threads.

#### <a href="#device" name="device"></a>`device_t` (`u64`)

Identifier for a device containing a file system. Can be used
in combination with [`inode_t`](#inode) to uniquely identify a file on the
local system.

Used by [`filestat_t`](#filestat).

#### <a href="#dircookie" name="dircookie"></a>`dircookie_t` (`u64`)

A reference to the offset of a directory entry.

Used by [`dirent_t`](#dirent) and [`file_readdir()`](#file_readdir).

Special values:

- <a href="#dircookie.start" name="dircookie.start"></a>**`DIRCOOKIE_START`**

    Permanent reference to the first directory entry
    within a directory.

#### <a href="#dirent" name="dirent"></a>`dirent_t` (`struct`)

A directory entry.

Members:

- <a href="#dirent.d_next" name="dirent.d_next"></a><code><strong>d\_next</strong>: [dircookie\_t](#dircookie)</code>

    The offset of the next directory entry stored in this
    directory.

- <a href="#dirent.d_ino" name="dirent.d_ino"></a><code><strong>d\_ino</strong>: [inode\_t](#inode)</code>

    The serial number of the file referred to by this
    directory entry.

- <a href="#dirent.d_namlen" name="dirent.d_namlen"></a><code><strong>d\_namlen</strong>: u32</code>

    The length of the name of the directory entry.

- <a href="#dirent.d_type" name="dirent.d_type"></a><code><strong>d\_type</strong>: [filetype\_t](#filetype)</code>

    The type of the file referred to by this directory
    entry.

#### <a href="#errno" name="errno"></a>`errno_t` (`u16`)

Error codes returned by system calls.

Not all of these error codes are returned by the system calls
provided by this environment, but are either used in userspace
exclusively or merely provided for alignment with POSIX.

Used by [`event_t`](#event) and [`sockstat_t`](#sockstat).

Possible values:

- <a href="#errno.2big" name="errno.2big"></a>**`E2BIG`**

    Argument list too long.

- <a href="#errno.acces" name="errno.acces"></a>**`EACCES`**

    Permission denied.

- <a href="#errno.addrinuse" name="errno.addrinuse"></a>**`EADDRINUSE`**

    Address in use.

- <a href="#errno.addrnotavail" name="errno.addrnotavail"></a>**`EADDRNOTAVAIL`**

    Address not available.

- <a href="#errno.afnosupport" name="errno.afnosupport"></a>**`EAFNOSUPPORT`**

    Address family not supported.

- <a href="#errno.again" name="errno.again"></a>**`EAGAIN`**

    Resource unavailable, or operation would block.

- <a href="#errno.already" name="errno.already"></a>**`EALREADY`**

    Connection already in progress.

- <a href="#errno.badf" name="errno.badf"></a>**`EBADF`**

    Bad file descriptor.

- <a href="#errno.badmsg" name="errno.badmsg"></a>**`EBADMSG`**

    Bad message.

- <a href="#errno.busy" name="errno.busy"></a>**`EBUSY`**

    Device or resource busy.

- <a href="#errno.canceled" name="errno.canceled"></a>**`ECANCELED`**

    Operation canceled.

- <a href="#errno.child" name="errno.child"></a>**`ECHILD`**

    No child processes.

- <a href="#errno.connaborted" name="errno.connaborted"></a>**`ECONNABORTED`**

    Connection aborted.

- <a href="#errno.connrefused" name="errno.connrefused"></a>**`ECONNREFUSED`**

    Connection refused.

- <a href="#errno.connreset" name="errno.connreset"></a>**`ECONNRESET`**

    Connection reset.

- <a href="#errno.deadlk" name="errno.deadlk"></a>**`EDEADLK`**

    Resource deadlock would occur.

- <a href="#errno.destaddrreq" name="errno.destaddrreq"></a>**`EDESTADDRREQ`**

    Destination address required.

- <a href="#errno.dom" name="errno.dom"></a>**`EDOM`**

    Mathematics argument out of domain of function.

- <a href="#errno.dquot" name="errno.dquot"></a>**`EDQUOT`**

    Reserved.

- <a href="#errno.exist" name="errno.exist"></a>**`EEXIST`**

    File exists.

- <a href="#errno.fault" name="errno.fault"></a>**`EFAULT`**

    Bad address.

- <a href="#errno.fbig" name="errno.fbig"></a>**`EFBIG`**

    File too large.

- <a href="#errno.hostunreach" name="errno.hostunreach"></a>**`EHOSTUNREACH`**

    Host is unreachable.

- <a href="#errno.idrm" name="errno.idrm"></a>**`EIDRM`**

    Identifier removed.

- <a href="#errno.ilseq" name="errno.ilseq"></a>**`EILSEQ`**

    Illegal byte sequence.

- <a href="#errno.inprogress" name="errno.inprogress"></a>**`EINPROGRESS`**

    Operation in progress.

- <a href="#errno.intr" name="errno.intr"></a>**`EINTR`**

    Interrupted function.

- <a href="#errno.inval" name="errno.inval"></a>**`EINVAL`**

    Invalid argument.

- <a href="#errno.io" name="errno.io"></a>**`EIO`**

    I/O error.

- <a href="#errno.isconn" name="errno.isconn"></a>**`EISCONN`**

    Socket is connected.

- <a href="#errno.isdir" name="errno.isdir"></a>**`EISDIR`**

    Is a directory.

- <a href="#errno.loop" name="errno.loop"></a>**`ELOOP`**

    Too many levels of symbolic links.

- <a href="#errno.mfile" name="errno.mfile"></a>**`EMFILE`**

    File descriptor value too large.

- <a href="#errno.mlink" name="errno.mlink"></a>**`EMLINK`**

    Too many links.

- <a href="#errno.msgsize" name="errno.msgsize"></a>**`EMSGSIZE`**

    Message too large.

- <a href="#errno.multihop" name="errno.multihop"></a>**`EMULTIHOP`**

    Reserved.

- <a href="#errno.nametoolong" name="errno.nametoolong"></a>**`ENAMETOOLONG`**

    Filename too long.

- <a href="#errno.netdown" name="errno.netdown"></a>**`ENETDOWN`**

    Network is down.

- <a href="#errno.netreset" name="errno.netreset"></a>**`ENETRESET`**

    Connection aborted by network.

- <a href="#errno.netunreach" name="errno.netunreach"></a>**`ENETUNREACH`**

    Network unreachable.

- <a href="#errno.nfile" name="errno.nfile"></a>**`ENFILE`**

    Too many files open in system.

- <a href="#errno.nobufs" name="errno.nobufs"></a>**`ENOBUFS`**

    No buffer space available.

- <a href="#errno.nodev" name="errno.nodev"></a>**`ENODEV`**

    No such device.

- <a href="#errno.noent" name="errno.noent"></a>**`ENOENT`**

    No such file or directory.

- <a href="#errno.noexec" name="errno.noexec"></a>**`ENOEXEC`**

    Executable file format error.

- <a href="#errno.nolck" name="errno.nolck"></a>**`ENOLCK`**

    No locks available.

- <a href="#errno.nolink" name="errno.nolink"></a>**`ENOLINK`**

    Reserved.

- <a href="#errno.nomem" name="errno.nomem"></a>**`ENOMEM`**

    Not enough space.

- <a href="#errno.nomsg" name="errno.nomsg"></a>**`ENOMSG`**

    No message of the desired type.

- <a href="#errno.noprotoopt" name="errno.noprotoopt"></a>**`ENOPROTOOPT`**

    Protocol not available.

- <a href="#errno.nospc" name="errno.nospc"></a>**`ENOSPC`**

    No space left on device.

- <a href="#errno.nosys" name="errno.nosys"></a>**`ENOSYS`**

    Function not supported.

- <a href="#errno.notconn" name="errno.notconn"></a>**`ENOTCONN`**

    The socket is not connected.

- <a href="#errno.notdir" name="errno.notdir"></a>**`ENOTDIR`**

    Not a directory or a symbolic link to a directory.

- <a href="#errno.notempty" name="errno.notempty"></a>**`ENOTEMPTY`**

    Directory not empty.

- <a href="#errno.notrecoverable" name="errno.notrecoverable"></a>**`ENOTRECOVERABLE`**

    State not recoverable.

- <a href="#errno.notsock" name="errno.notsock"></a>**`ENOTSOCK`**

    Not a socket.

- <a href="#errno.notsup" name="errno.notsup"></a>**`ENOTSUP`**

    Not supported, or operation not supported on socket.

- <a href="#errno.notty" name="errno.notty"></a>**`ENOTTY`**

    Inappropriate I/O control operation.

- <a href="#errno.nxio" name="errno.nxio"></a>**`ENXIO`**

    No such device or address.

- <a href="#errno.overflow" name="errno.overflow"></a>**`EOVERFLOW`**

    Value too large to be stored in data type.

- <a href="#errno.ownerdead" name="errno.ownerdead"></a>**`EOWNERDEAD`**

    Previous owner died.

- <a href="#errno.perm" name="errno.perm"></a>**`EPERM`**

    Operation not permitted.

- <a href="#errno.pipe" name="errno.pipe"></a>**`EPIPE`**

    Broken pipe.

- <a href="#errno.proto" name="errno.proto"></a>**`EPROTO`**

    Protocol error.

- <a href="#errno.protonosupport" name="errno.protonosupport"></a>**`EPROTONOSUPPORT`**

    Protocol not supported.

- <a href="#errno.prototype" name="errno.prototype"></a>**`EPROTOTYPE`**

    Protocol wrong type for socket.

- <a href="#errno.range" name="errno.range"></a>**`ERANGE`**

    Result too large.

- <a href="#errno.rofs" name="errno.rofs"></a>**`EROFS`**

    Read-only file system.

- <a href="#errno.spipe" name="errno.spipe"></a>**`ESPIPE`**

    Invalid seek.

- <a href="#errno.srch" name="errno.srch"></a>**`ESRCH`**

    No such process.

- <a href="#errno.stale" name="errno.stale"></a>**`ESTALE`**

    Reserved.

- <a href="#errno.timedout" name="errno.timedout"></a>**`ETIMEDOUT`**

    Connection timed out.

- <a href="#errno.txtbsy" name="errno.txtbsy"></a>**`ETXTBSY`**

    Text file busy.

- <a href="#errno.xdev" name="errno.xdev"></a>**`EXDEV`**

    Cross-device link.

- <a href="#errno.notcapable" name="errno.notcapable"></a>**`ENOTCAPABLE`**

    Extension: Capabilities insufficient.

#### <a href="#event" name="event"></a>`event_t` (`struct`)

An event that occurred.

Used by [`poll()`](#poll) and [`poll_fd()`](#poll_fd).

Members:

- <a href="#event.userdata" name="event.userdata"></a><code><strong>userdata</strong>: [userdata\_t](#userdata)</code>

    User-provided value that got attached to
    [`subscription_t.userdata`](#subscription.userdata).

- <a href="#event.error" name="event.error"></a><code><strong>error</strong>: [errno\_t](#errno)</code>

    If non-zero, an error that occurred while processing
    the subscription request.

- <a href="#event.type" name="event.type"></a><code><strong>type</strong>: [eventtype\_t](#eventtype)</code>

    The type of the event that occurred.

- When `type` is [`EVENTTYPE_CLOCK`](#eventtype.clock):

    - <a href="#event.clock" name="event.clock"></a>**`clock()`**

        - <a href="#event.clock.identifier" name="event.clock.identifier"></a><code><strong>identifier</strong>: [userdata\_t](#userdata)</code>

            The user-defined unique
            identifier of the clock.

- When `type` is [`EVENTTYPE_CONDVAR`](#eventtype.condvar):

    - <a href="#event.condvar" name="event.condvar"></a>**`condvar()`**

        - <a href="#event.condvar.condvar" name="event.condvar.condvar"></a><code><strong>condvar</strong>: *mut [condvar\_t](#condvar)</code>

            The condition variable that
            got woken up.

- When `type` is [`EVENTTYPE_FD_READ`](#eventtype.fd_read) or [`EVENTTYPE_FD_WRITE`](#eventtype.fd_write):

    - <a href="#event.fd_readwrite" name="event.fd_readwrite"></a>**`fd_readwrite()`**

        - <a href="#event.fd_readwrite.nbytes" name="event.fd_readwrite.nbytes"></a><code><strong>nbytes</strong>: [filesize\_t](#filesize)</code>

            The number of bytes available
            for reading or writing.

        - <a href="#event.fd_readwrite.fd" name="event.fd_readwrite.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

            The file descriptor that has
            data available for reading or
            writing.

        - <a href="#event.fd_readwrite.flags" name="event.fd_readwrite.flags"></a><code><strong>flags</strong>: [eventrwflags\_t](#eventrwflags)</code>

            The state of the file
            descriptor.

- When `type` is [`EVENTTYPE_LOCK_RDLOCK`](#eventtype.lock_rdlock) or [`EVENTTYPE_LOCK_WRLOCK`](#eventtype.lock_wrlock):

    - <a href="#event.lock" name="event.lock"></a>**`lock()`**

        - <a href="#event.lock.lock" name="event.lock.lock"></a><code><strong>lock</strong>: *mut [lock\_t](#lock)</code>

            The lock that has been
            acquired for reading or
            writing.

- When `type` is [`EVENTTYPE_PROC_TERMINATE`](#eventtype.proc_terminate):

    - <a href="#event.proc_terminate" name="event.proc_terminate"></a>**`proc_terminate()`**

        - <a href="#event.proc_terminate.fd" name="event.proc_terminate.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

            The process descriptor of the
            process that has terminated.

        - <a href="#event.proc_terminate.signal" name="event.proc_terminate.signal"></a><code><strong>signal</strong>: [signal\_t](#signal)</code>

            If zero, the process has
            exited.
            Otherwise, the signal
            condition causing it to
            terminated.

        - <a href="#event.proc_terminate.exitcode" name="event.proc_terminate.exitcode"></a><code><strong>exitcode</strong>: [exitcode\_t](#exitcode)</code>

            If exited, the exit code of
            the process.

#### <a href="#eventrwflags" name="eventrwflags"></a>`eventrwflags_t` (`u16` bitfield)

The state of the file descriptor subscribed to with
[`EVENTTYPE_FD_READ`](#eventtype.fd_read) or [`EVENTTYPE_FD_WRITE`](#eventtype.fd_write).

Used by [`event_t`](#event).

Possible values:

- <a href="#eventrwflags.hangup" name="eventrwflags.hangup"></a>**`EVENT_FD_READWRITE_HANGUP`**

    The peer of this FIFO or socket has closed or
    disconnected.

#### <a href="#eventtype" name="eventtype"></a>`eventtype_t` (`u8`)

Type of a subscription to an event or its occurence.

Used by [`event_t`](#event) and [`subscription_t`](#subscription).

Possible values:

- <a href="#eventtype.clock" name="eventtype.clock"></a>**`EVENTTYPE_CLOCK`**

    The time value of clock [`subscription_t.clock().clock_id`](#subscription.clock.clock_id)
    has reached timestamp [`subscription_t.clock().timeout`](#subscription.clock.timeout).

- <a href="#eventtype.condvar" name="eventtype.condvar"></a>**`EVENTTYPE_CONDVAR`**

    Condition variable [`subscription_t.condvar().condvar`](#subscription.condvar.condvar) has
    been woken up and [`subscription_t.condvar().lock`](#subscription.condvar.lock) has been
    aqcuired for writing.

- <a href="#eventtype.fd_read" name="eventtype.fd_read"></a>**`EVENTTYPE_FD_READ`**

    File descriptor [`subscription_t.fd_readwrite().fd`](#subscription.fd_readwrite.fd) has
    data available for reading.

- <a href="#eventtype.fd_write" name="eventtype.fd_write"></a>**`EVENTTYPE_FD_WRITE`**

    File descriptor [`subscription_t.fd_readwrite().fd`](#subscription.fd_readwrite.fd) has
    capacity available for writing.

- <a href="#eventtype.lock_rdlock" name="eventtype.lock_rdlock"></a>**`EVENTTYPE_LOCK_RDLOCK`**

    Lock [`subscription_t.lock().lock`](#subscription.lock.lock) has been acquired for
    reading.

- <a href="#eventtype.lock_wrlock" name="eventtype.lock_wrlock"></a>**`EVENTTYPE_LOCK_WRLOCK`**

    Lock [`subscription_t.lock().lock`](#subscription.lock.lock) has been acquired for
    writing.

- <a href="#eventtype.proc_terminate" name="eventtype.proc_terminate"></a>**`EVENTTYPE_PROC_TERMINATE`**

    The process associated with process descriptor
    [`subscription_t.proc_terminate().fd`](#subscription.proc_terminate.fd) has terminated.

#### <a href="#exitcode" name="exitcode"></a>`exitcode_t` (`u32`)

Exit code generated by a process when exiting.

Used by [`event_t`](#event) and [`proc_exit()`](#proc_exit).

#### <a href="#fd" name="fd"></a>`fd_t` (`u32`)

A file descriptor number.

Unlike on POSIX-compliant systems, none of the file descriptor
numbers are reserved for a purpose (e.g., stdin, stdout,
stderr). Operating systems are not required to allocate new
file descriptors in ascending order.

Special values:

- <a href="#fd.process_child" name="fd.process_child"></a>**`PROCESS_CHILD`**

    Returned to the child process by [`proc_fork()`](#proc_fork).

- <a href="#fd.map_anon_fd" name="fd.map_anon_fd"></a>**`MAP_ANON_FD`**

    Passed to [`mem_map()`](#mem_map) when creating a mapping to
    anonymous memory.

#### <a href="#fdflags" name="fdflags"></a>`fdflags_t` (`u16` bitfield)

File descriptor flags.

Used by [`fdstat_t`](#fdstat).

Possible values:

- <a href="#fdflags.append" name="fdflags.append"></a>**`FDFLAG_APPEND`**

    Append mode: Data written to the file is always
    appended to the file's end.

- <a href="#fdflags.dsync" name="fdflags.dsync"></a>**`FDFLAG_DSYNC`**

    Write according to synchronized I/O data integrity
    completion. Only the data stored in the file is
    synchronized.

- <a href="#fdflags.nonblock" name="fdflags.nonblock"></a>**`FDFLAG_NONBLOCK`**

    Non-blocking mode.

- <a href="#fdflags.rsync" name="fdflags.rsync"></a>**`FDFLAG_RSYNC`**

    Synchronized read I/O operations.

- <a href="#fdflags.sync" name="fdflags.sync"></a>**`FDFLAG_SYNC`**

    Write according to synchronized I/O file integrity
    completion. In addition to synchronizing the data
    stored in the file, the system may also synchronously
    update the file's metadata.

#### <a href="#fdsflags" name="fdsflags"></a>`fdsflags_t` (`u16` bitfield)

Which file descriptor attributes to adjust.

Used by [`fd_stat_put()`](#fd_stat_put).

Possible values:

- <a href="#fdsflags.flags" name="fdsflags.flags"></a>**`FDSTAT_FLAGS`**

    Adjust the file descriptor flags stored in
    [`fdstat_t.fs_flags`](#fdstat.fs_flags).

- <a href="#fdsflags.rights" name="fdsflags.rights"></a>**`FDSTAT_RIGHTS`**

    Restrict the rights of the file descriptor to the
    rights stored in [`fdstat_t.fs_rights_base`](#fdstat.fs_rights_base) and
    [`fdstat_t.fs_rights_inheriting`](#fdstat.fs_rights_inheriting).

#### <a href="#fdstat" name="fdstat"></a>`fdstat_t` (`struct`)

File descriptor attributes.

Used by [`fd_stat_get()`](#fd_stat_get), [`fd_stat_put()`](#fd_stat_put), and [`file_open()`](#file_open).

Members:

- <a href="#fdstat.fs_filetype" name="fdstat.fs_filetype"></a><code><strong>fs\_filetype</strong>: [filetype\_t](#filetype)</code>

    File type.

- <a href="#fdstat.fs_flags" name="fdstat.fs_flags"></a><code><strong>fs\_flags</strong>: [fdflags\_t](#fdflags)</code>

    File descriptor flags.

- <a href="#fdstat.fs_rights_base" name="fdstat.fs_rights_base"></a><code><strong>fs\_rights\_base</strong>: [rights\_t](#rights)</code>

    Rights that apply to this file descriptor.

- <a href="#fdstat.fs_rights_inheriting" name="fdstat.fs_rights_inheriting"></a><code><strong>fs\_rights\_inheriting</strong>: [rights\_t](#rights)</code>

    Maximum set of rights that can be installed on new
    file descriptors that are created through this file
    descriptor, e.g., through [`file_open()`](#file_open).

#### <a href="#filedelta" name="filedelta"></a>`filedelta_t` (`i64`)

Relative offset within a file.

Used by [`fd_seek()`](#fd_seek).

#### <a href="#filesize" name="filesize"></a>`filesize_t` (`u64`)

Non-negative file size or length of a region within a file.

Used by [`event_t`](#event), [`filestat_t`](#filestat), [`fd_pread()`](#fd_pread), [`fd_pwrite()`](#fd_pwrite), [`fd_seek()`](#fd_seek), [`file_advise()`](#file_advise), [`file_allocate()`](#file_allocate), and [`mem_map()`](#mem_map).

#### <a href="#filestat" name="filestat"></a>`filestat_t` (`struct`)

File attributes.

Used by [`file_stat_fget()`](#file_stat_fget), [`file_stat_fput()`](#file_stat_fput), [`file_stat_get()`](#file_stat_get), and [`file_stat_put()`](#file_stat_put).

Members:

- <a href="#filestat.st_dev" name="filestat.st_dev"></a><code><strong>st\_dev</strong>: [device\_t](#device)</code>

    Device ID of device containing the file.

- <a href="#filestat.st_ino" name="filestat.st_ino"></a><code><strong>st\_ino</strong>: [inode\_t](#inode)</code>

    File serial number.

- <a href="#filestat.st_filetype" name="filestat.st_filetype"></a><code><strong>st\_filetype</strong>: [filetype\_t](#filetype)</code>

    File type.

- <a href="#filestat.st_nlink" name="filestat.st_nlink"></a><code><strong>st\_nlink</strong>: [linkcount\_t](#linkcount)</code>

    Number of hard links to the file.

- <a href="#filestat.st_size" name="filestat.st_size"></a><code><strong>st\_size</strong>: [filesize\_t](#filesize)</code>

    For regular files, the file size in bytes. For
    symbolic links, the length in bytes of the pathname
    contained in the symbolic link.

- <a href="#filestat.st_atim" name="filestat.st_atim"></a><code><strong>st\_atim</strong>: [timestamp\_t](#timestamp)</code>

    Last data access timestamp.

- <a href="#filestat.st_mtim" name="filestat.st_mtim"></a><code><strong>st\_mtim</strong>: [timestamp\_t](#timestamp)</code>

    Last data modification timestamp.

- <a href="#filestat.st_ctim" name="filestat.st_ctim"></a><code><strong>st\_ctim</strong>: [timestamp\_t](#timestamp)</code>

    Last file status change timestamp.

#### <a href="#filetype" name="filetype"></a>`filetype_t` (`u8`)

The type of a file descriptor or file.

Used by [`dirent_t`](#dirent), [`fdstat_t`](#fdstat), [`filestat_t`](#filestat), [`fd_create1()`](#fd_create1), [`fd_create2()`](#fd_create2), and [`file_create()`](#file_create).

Possible values:

- <a href="#filetype.unknown" name="filetype.unknown"></a>**`FILETYPE_UNKNOWN`**

    The type of the file descriptor or file is unknown or
    is different from any of the other types specified.

- <a href="#filetype.block_device" name="filetype.block_device"></a>**`FILETYPE_BLOCK_DEVICE`**

    The file descriptor or file refers to a block device
    inode.

- <a href="#filetype.character_device" name="filetype.character_device"></a>**`FILETYPE_CHARACTER_DEVICE`**

    The file descriptor or file refers to a character
    device inode.

- <a href="#filetype.directory" name="filetype.directory"></a>**`FILETYPE_DIRECTORY`**

    The file descriptor or file refers to a directory
    inode.

- <a href="#filetype.fifo" name="filetype.fifo"></a>**`FILETYPE_FIFO`**

    The file descriptor or file refers to a FIFO inode or
    one of the two endpoints of a pipe.

- <a href="#filetype.poll" name="filetype.poll"></a>**`FILETYPE_POLL`**

    The file descriptor refers to a polling event queue.

- <a href="#filetype.process" name="filetype.process"></a>**`FILETYPE_PROCESS`**

    The file descriptor refers to a process handle.

- <a href="#filetype.regular_file" name="filetype.regular_file"></a>**`FILETYPE_REGULAR_FILE`**

    The file descriptor or file refers to a regular file
    inode.

- <a href="#filetype.shared_memory" name="filetype.shared_memory"></a>**`FILETYPE_SHARED_MEMORY`**

    The file descriptor refers to a shared memory object.

- <a href="#filetype.socket_dgram" name="filetype.socket_dgram"></a>**`FILETYPE_SOCKET_DGRAM`**

    The file descriptor or file refers to a datagram
    socket.

- <a href="#filetype.socket_seqpacket" name="filetype.socket_seqpacket"></a>**`FILETYPE_SOCKET_SEQPACKET`**

    The file descriptor or file refers to a
    sequenced-packet socket.

- <a href="#filetype.socket_stream" name="filetype.socket_stream"></a>**`FILETYPE_SOCKET_STREAM`**

    The file descriptor or file refers to a byte-stream
    socket.

- <a href="#filetype.symbolic_link" name="filetype.symbolic_link"></a>**`FILETYPE_SYMBOLIC_LINK`**

    The file refers to a symbolic link inode.

#### <a href="#fsflags" name="fsflags"></a>`fsflags_t` (`u16` bitfield)

Which file attributes to adjust.

Used by [`file_stat_fput()`](#file_stat_fput) and [`file_stat_put()`](#file_stat_put).

Possible values:

- <a href="#fsflags.atim" name="fsflags.atim"></a>**`FILESTAT_ATIM`**

    Adjust the last data access timestamp to the value
    stored in [`filestat_t.st_atim`](#filestat.st_atim).

- <a href="#fsflags.atim_now" name="fsflags.atim_now"></a>**`FILESTAT_ATIM_NOW`**

    Adjust the last data access timestamp to the time
    of clock [`CLOCK_REALTIME`](#clockid.realtime).

- <a href="#fsflags.mtim" name="fsflags.mtim"></a>**`FILESTAT_MTIM`**

    Adjust the last data modification timestamp to the
    value stored in [`filestat_t.st_mtim`](#filestat.st_mtim).

- <a href="#fsflags.mtim_now" name="fsflags.mtim_now"></a>**`FILESTAT_MTIM_NOW`**

    Adjust the last data modification timestamp to the
    time of clock [`CLOCK_REALTIME`](#clockid.realtime).

- <a href="#fsflags.size" name="fsflags.size"></a>**`FILESTAT_SIZE`**

    Truncate or extend the file to the size stored in
    [`filestat_t.st_size`](#filestat.st_size).

#### <a href="#inode" name="inode"></a>`inode_t` (`u64`)

File serial number that is unique within its file system.

Used by [`dirent_t`](#dirent) and [`filestat_t`](#filestat).

#### <a href="#iovec" name="iovec"></a>`iovec_t` (`struct`)

A region of memory for scatter/gather reads.

Used by [`recv_in_t`](#recv_in), [`fd_pread()`](#fd_pread), and [`fd_read()`](#fd_read).

Members:

- <a href="#iovec.iov_base" name="iovec.iov_base"></a><code><strong>iov\_base</strong>: *mut c\_void</code> and <a href="#iovec.iov_len" name="iovec.iov_len"></a><code><strong>iov\_len</strong>: usize</code>

    The address and length of the buffer to be filled.

#### <a href="#linkcount" name="linkcount"></a>`linkcount_t` (`u32`)

Number of hard links to an inode.

Used by [`filestat_t`](#filestat).

#### <a href="#lock" name="lock"></a>`lock_t` (`u32`)

A userspace read-recursive readers-writer lock, similar to a
Linux futex or a FreeBSD umtx.

Used by [`event_t`](#event), [`subscription_t`](#subscription), [`lock_unlock()`](#lock_unlock), and [`thread_exit()`](#thread_exit).

Special values:

- <a href="#lock.unlocked" name="lock.unlocked"></a>**`LOCK_UNLOCKED`**

    Value indicating that the lock is in its initial
    unlocked state.

- <a href="#lock.wrlocked" name="lock.wrlocked"></a>**`LOCK_WRLOCKED`**

    Bitmask indicating that the lock is write-locked. If
    set, the lower 30 bits of the lock contain the
    identifier of the thread that owns the write lock.
    Otherwise, the lower 30 bits of the lock contain the
    number of acquired read locks.

- <a href="#lock.kernel_managed" name="lock.kernel_managed"></a>**`LOCK_KERNEL_MANAGED`**

    Bitmask indicating that the lock is either read locked
    or write locked, and that one or more threads have
    their execution suspended, waiting to acquire the
    lock. The last owner of the lock must call the
    kernel to unlock.

    When the lock is acquired for reading and this bit is
    set, it means that one or more threads are attempting
    to acquire this lock for writing. In that case, other
    threads should only acquire additional read locks if
    suspending execution would cause a deadlock. It is
    preferred to suspend execution, as this prevents
    starvation of writers.

- <a href="#lock.bogus" name="lock.bogus"></a>**`LOCK_BOGUS`**

    Value indicating that the lock is in an incorrect
    state. A lock cannot be in its initial unlocked state,
    while also managed by the kernel.

#### <a href="#lookup" name="lookup"></a>`lookup_t` (`struct`)

Path lookup properties.

Used by [`file_link()`](#file_link), [`file_open()`](#file_open), [`file_stat_get()`](#file_stat_get), and [`file_stat_put()`](#file_stat_put).

Members:

- <a href="#lookup.fd" name="lookup.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

    The working directory at which the resolution of the
    path starts.

- <a href="#lookup.flags" name="lookup.flags"></a><code><strong>flags</strong>: [lookupflags\_t](#lookupflags)</code>

    Flags determining the method of how the path is
    resolved.

#### <a href="#lookupflags" name="lookupflags"></a>`lookupflags_t` (`u32` bitfield)

Flags determining the method of how paths are resolved.

Used by [`lookup_t`](#lookup).

Possible values:

- <a href="#lookupflags.symlink_follow" name="lookupflags.symlink_follow"></a>**`LOOKUP_SYMLINK_FOLLOW`**

    As long as the resolved path corresponds to a symbolic
    link, it is expanded.

#### <a href="#mflags" name="mflags"></a>`mflags_t` (`u8` bitfield)

Memory mapping flags.

Used by [`mem_map()`](#mem_map).

Possible values:

- <a href="#mflags.anon" name="mflags.anon"></a>**`MAP_ANON`**

    Instead of mapping the contents of the file provided,
    create a mapping to anonymous memory. The file
    descriptor argument must be set to [`MAP_ANON_FD`](#fd.map_anon_fd),
    and the offset must be set to zero.

- <a href="#mflags.fixed" name="mflags.fixed"></a>**`MAP_FIXED`**

    Require that the mapping is performed at the base
    address provided.

- <a href="#mflags.private" name="mflags.private"></a>**`MAP_PRIVATE`**

    Changes are private.

- <a href="#mflags.shared" name="mflags.shared"></a>**`MAP_SHARED`**

    Changes are shared.

#### <a href="#mprot" name="mprot"></a>`mprot_t` (`u8` bitfield)

Memory page protection options.

This implementation enforces the W^X property: Pages cannot be
mapped for execution while also mapped for writing.

Used by [`mem_map()`](#mem_map) and [`mem_protect()`](#mem_protect).

Possible values:

- <a href="#mprot.exec" name="mprot.exec"></a>**`PROT_EXEC`**

    Page can be executed.

- <a href="#mprot.write" name="mprot.write"></a>**`PROT_WRITE`**

    Page can be written.

- <a href="#mprot.read" name="mprot.read"></a>**`PROT_READ`**

    Page can be read.

#### <a href="#msflags" name="msflags"></a>`msflags_t` (`u8` bitfield)

Methods of synchronizing memory with physical storage.

Used by [`mem_sync()`](#mem_sync).

Possible values:

- <a href="#msflags.async" name="msflags.async"></a>**`MS_ASYNC`**

    Perform asynchronous writes.

- <a href="#msflags.invalidate" name="msflags.invalidate"></a>**`MS_INVALIDATE`**

    Invalidate cached data.

- <a href="#msflags.sync" name="msflags.sync"></a>**`MS_SYNC`**

    Perform synchronous writes.

#### <a href="#msgflags" name="msgflags"></a>`msgflags_t` (`u16` bitfield)

Flags provided to and returned by [`sock_recv()`](#sock_recv) and [`sock_send()`](#sock_send).

Used by [`recv_in_t`](#recv_in), [`recv_out_t`](#recv_out), and [`send_in_t`](#send_in).

Possible values:

- <a href="#msgflags.ctrunc" name="msgflags.ctrunc"></a>**`MSG_CTRUNC`**

    Returned by [`sock_recv()`](#sock_recv): File descriptors truncated.

- <a href="#msgflags.eor" name="msgflags.eor"></a>**`MSG_EOR`**

    Provided to [`sock_send()`](#sock_send): Terminates a record (if
    supported by the protocol).

    Returned by [`sock_recv()`](#sock_recv): End-of-record was received
    (if supported by the protocol).

- <a href="#msgflags.peek" name="msgflags.peek"></a>**`MSG_PEEK`**

    Provided to [`sock_recv()`](#sock_recv): Returns the message without
    removing it from the socket's receive queue.

- <a href="#msgflags.trunc" name="msgflags.trunc"></a>**`MSG_TRUNC`**

    Returned by [`sock_recv()`](#sock_recv): Message data has been
    truncated.

- <a href="#msgflags.waitall" name="msgflags.waitall"></a>**`MSG_WAITALL`**

    Provided to [`sock_recv()`](#sock_recv): On byte-stream sockets, block
    until the full amount of data can be returned.

#### <a href="#nthreads" name="nthreads"></a>`nthreads_t` (`u32`)

Specifies the number of threads sleeping on a condition
variable that should be woken up.

Used by [`condvar_signal()`](#condvar_signal).

#### <a href="#oflags" name="oflags"></a>`oflags_t` (`u16` bitfield)

Open flags used by [`file_open()`](#file_open).

Possible values:

- <a href="#oflags.creat" name="oflags.creat"></a>**`O_CREAT`**

    Create file if it does not exist.

- <a href="#oflags.directory" name="oflags.directory"></a>**`O_DIRECTORY`**

    Fail if not a directory.

- <a href="#oflags.excl" name="oflags.excl"></a>**`O_EXCL`**

    Fail if file already exists.

- <a href="#oflags.trunc" name="oflags.trunc"></a>**`O_TRUNC`**

    Truncate file to size 0.

#### <a href="#processentry" name="processentry"></a>`processentry_t` (function type)

Entry point for a process (`_start`).

Parameters:

- <a href="#processentry.auxv" name="processentry.auxv"></a><code><strong>auxv</strong>: * [auxv\_t](#auxv)</code>

    The auxiliary vector. See [`auxv_t`](#auxv).

#### <a href="#recv_in" name="recv_in"></a>`recv_in_t` (`struct`)

Arguments of [`sock_recv()`](#sock_recv).

Members:

- <a href="#recv_in.ri_data" name="recv_in.ri_data"></a><code><strong>ri\_data</strong>: * [iovec\_t](#iovec)</code> and <a href="#recv_in.ri_datalen" name="recv_in.ri_datalen"></a><code><strong>ri\_datalen</strong>: usize</code>

    List of scatter/gather vectors where message data
    should be stored.

- <a href="#recv_in.ri_fds" name="recv_in.ri_fds"></a><code><strong>ri\_fds</strong>: *mut [fd\_t](#fd)</code> and <a href="#recv_in.ri_fdslen" name="recv_in.ri_fdslen"></a><code><strong>ri\_fdslen</strong>: usize</code>

    Buffer where numbers of incoming file descriptors
    should be stored.

- <a href="#recv_in.ri_flags" name="recv_in.ri_flags"></a><code><strong>ri\_flags</strong>: [msgflags\_t](#msgflags)</code>

    Message flags. Only [`MSG_PEEK`](#msgflags.peek) and
    [`MSG_WAITALL`](#msgflags.waitall) are valid.

#### <a href="#recv_out" name="recv_out"></a>`recv_out_t` (`struct`)

Results of [`sock_recv()`](#sock_recv).

Members:

- <a href="#recv_out.ro_datalen" name="recv_out.ro_datalen"></a><code><strong>ro\_datalen</strong>: usize</code>

    Number of bytes stored in [`recv_in_t.ri_data`](#recv_in.ri_data).

- <a href="#recv_out.ro_fdslen" name="recv_out.ro_fdslen"></a><code><strong>ro\_fdslen</strong>: usize</code>

    Number of file descriptors stored in [`recv_in_t.ri_fds`](#recv_in.ri_fds).

- <a href="#recv_out.ro_sockname" name="recv_out.ro_sockname"></a><code><strong>ro\_sockname</strong>: [sockaddr\_t](#sockaddr)</code>

    Address on which the message was received.

- <a href="#recv_out.ro_peername" name="recv_out.ro_peername"></a><code><strong>ro\_peername</strong>: [sockaddr\_t](#sockaddr)</code>

    Address of the peer sending the message.

- <a href="#recv_out.ro_flags" name="recv_out.ro_flags"></a><code><strong>ro\_flags</strong>: [msgflags\_t](#msgflags)</code>

    Message flags. Only [`MSG_CTRUNC`](#msgflags.ctrunc), [`MSG_EOR`](#msgflags.eor),
    and [`MSG_TRUNC`](#msgflags.trunc) are valid.

#### <a href="#rights" name="rights"></a>`rights_t` (`u64` bitfield)

File descriptor rights, determining which actions may be
performed.

Used by [`fdstat_t`](#fdstat).

Possible values:

- <a href="#rights.fd_datasync" name="rights.fd_datasync"></a>**`RIGHT_FD_DATASYNC`**

    The right to invoke [`fd_datasync()`](#fd_datasync).

    If [`RIGHT_FILE_OPEN`](#rights.file_open) is set, includes the right to
    invoke [`file_open()`](#file_open) with [`FDFLAG_DSYNC`](#fdflags.dsync).

- <a href="#rights.fd_read" name="rights.fd_read"></a>**`RIGHT_FD_READ`**

    The right to invoke [`fd_read()`](#fd_read) and [`sock_recv()`](#sock_recv).

    If [`RIGHT_MEM_MAP`](#rights.mem_map) is set, includes the right to
    invoke [`mem_map()`](#mem_map) with memory protection option
    [`PROT_READ`](#mprot.read).

    If [`RIGHT_FD_SEEK`](#rights.fd_seek) is set, includes the right to invoke
    [`fd_pread()`](#fd_pread).

- <a href="#rights.fd_seek" name="rights.fd_seek"></a>**`RIGHT_FD_SEEK`**

    The right to invoke [`fd_seek()`](#fd_seek). This flag implies
    [`RIGHT_FD_TELL`](#rights.fd_tell).

- <a href="#rights.fd_stat_put_flags" name="rights.fd_stat_put_flags"></a>**`RIGHT_FD_STAT_PUT_FLAGS`**

    The right to invoke [`fd_stat_put()`](#fd_stat_put) with
    [`FDSTAT_FLAGS`](#fdsflags.flags).

- <a href="#rights.fd_sync" name="rights.fd_sync"></a>**`RIGHT_FD_SYNC`**

    The right to invoke [`fd_sync()`](#fd_sync).

    If [`RIGHT_FILE_OPEN`](#rights.file_open) is set, includes the right to
    invoke [`file_open()`](#file_open) with [`FDFLAG_RSYNC`](#fdflags.rsync) and
    [`FDFLAG_DSYNC`](#fdflags.dsync).

- <a href="#rights.fd_tell" name="rights.fd_tell"></a>**`RIGHT_FD_TELL`**

    The right to invoke [`fd_seek()`](#fd_seek) in such a way that the
    file offset remains unaltered (i.e., [`WHENCE_CUR`](#whence.cur) with
    offset zero).

- <a href="#rights.fd_write" name="rights.fd_write"></a>**`RIGHT_FD_WRITE`**

    The right to invoke [`fd_write()`](#fd_write) and [`sock_send()`](#sock_send).

    If [`RIGHT_MEM_MAP`](#rights.mem_map) is set, includes the right to
    invoke [`mem_map()`](#mem_map) with memory protection option
    [`PROT_WRITE`](#mprot.write).

    If [`RIGHT_FD_SEEK`](#rights.fd_seek) is set, includes the right to
    invoke [`fd_pwrite()`](#fd_pwrite).

- <a href="#rights.file_advise" name="rights.file_advise"></a>**`RIGHT_FILE_ADVISE`**

    The right to invoke [`file_advise()`](#file_advise).

- <a href="#rights.file_allocate" name="rights.file_allocate"></a>**`RIGHT_FILE_ALLOCATE`**

    The right to invoke [`file_allocate()`](#file_allocate).

- <a href="#rights.file_create_directory" name="rights.file_create_directory"></a>**`RIGHT_FILE_CREATE_DIRECTORY`**

    The right to invoke [`file_create()`](#file_create) with
    [`FILETYPE_DIRECTORY`](#filetype.directory).

- <a href="#rights.file_create_file" name="rights.file_create_file"></a>**`RIGHT_FILE_CREATE_FILE`**

    If [`RIGHT_FILE_OPEN`](#rights.file_open) is set, the right to invoke
    [`file_open()`](#file_open) with [`O_CREAT`](#oflags.creat).

- <a href="#rights.file_create_fifo" name="rights.file_create_fifo"></a>**`RIGHT_FILE_CREATE_FIFO`**

    The right to invoke [`file_create()`](#file_create) with
    [`FILETYPE_FIFO`](#filetype.fifo).

- <a href="#rights.file_link_source" name="rights.file_link_source"></a>**`RIGHT_FILE_LINK_SOURCE`**

    The right to invoke [`file_link()`](#file_link) with the file
    descriptor as the source directory.

- <a href="#rights.file_link_target" name="rights.file_link_target"></a>**`RIGHT_FILE_LINK_TARGET`**

    The right to invoke [`file_link()`](#file_link) with the file
    descriptor as the target directory.

- <a href="#rights.file_open" name="rights.file_open"></a>**`RIGHT_FILE_OPEN`**

    The right to invoke [`file_open()`](#file_open).

- <a href="#rights.file_readdir" name="rights.file_readdir"></a>**`RIGHT_FILE_READDIR`**

    The right to invoke [`file_readdir()`](#file_readdir).

- <a href="#rights.file_readlink" name="rights.file_readlink"></a>**`RIGHT_FILE_READLINK`**

    The right to invoke [`file_readlink()`](#file_readlink).

- <a href="#rights.file_rename_source" name="rights.file_rename_source"></a>**`RIGHT_FILE_RENAME_SOURCE`**

    The right to invoke [`file_rename()`](#file_rename) with the file
    descriptor as the source directory.

- <a href="#rights.file_rename_target" name="rights.file_rename_target"></a>**`RIGHT_FILE_RENAME_TARGET`**

    The right to invoke [`file_rename()`](#file_rename) with the file
    descriptor as the target directory.

- <a href="#rights.file_stat_fget" name="rights.file_stat_fget"></a>**`RIGHT_FILE_STAT_FGET`**

    The right to invoke [`file_stat_fget()`](#file_stat_fget).

- <a href="#rights.file_stat_fput_size" name="rights.file_stat_fput_size"></a>**`RIGHT_FILE_STAT_FPUT_SIZE`**

    The right to invoke [`file_stat_fput()`](#file_stat_fput) with
    [`FILESTAT_SIZE`](#fsflags.size).

    If [`RIGHT_FILE_OPEN`](#rights.file_open) is set, includes the right to
    invoke [`file_open()`](#file_open) with [`O_TRUNC`](#oflags.trunc).

- <a href="#rights.file_stat_fput_times" name="rights.file_stat_fput_times"></a>**`RIGHT_FILE_STAT_FPUT_TIMES`**

    The right to invoke [`file_stat_fput()`](#file_stat_fput) with
    [`FILESTAT_ATIM`](#fsflags.atim), [`FILESTAT_ATIM_NOW`](#fsflags.atim_now), [`FILESTAT_MTIM`](#fsflags.mtim),
    and [`FILESTAT_MTIM_NOW`](#fsflags.mtim_now).

- <a href="#rights.file_stat_get" name="rights.file_stat_get"></a>**`RIGHT_FILE_STAT_GET`**

    The right to invoke [`file_stat_get()`](#file_stat_get).

- <a href="#rights.file_stat_put_times" name="rights.file_stat_put_times"></a>**`RIGHT_FILE_STAT_PUT_TIMES`**

    The right to invoke [`file_stat_put()`](#file_stat_put) with
    [`FILESTAT_ATIM`](#fsflags.atim), [`FILESTAT_ATIM_NOW`](#fsflags.atim_now), [`FILESTAT_MTIM`](#fsflags.mtim),
    and [`FILESTAT_MTIM_NOW`](#fsflags.mtim_now).

- <a href="#rights.file_symlink" name="rights.file_symlink"></a>**`RIGHT_FILE_SYMLINK`**

    The right to invoke [`file_symlink()`](#file_symlink).

- <a href="#rights.file_unlink" name="rights.file_unlink"></a>**`RIGHT_FILE_UNLINK`**

    The right to invoke [`file_unlink()`](#file_unlink).

- <a href="#rights.mem_map" name="rights.mem_map"></a>**`RIGHT_MEM_MAP`**

    The right to invoke [`mem_map()`](#mem_map) with [`mprot_t`](#mprot) set to
    zero.

- <a href="#rights.mem_map_exec" name="rights.mem_map_exec"></a>**`RIGHT_MEM_MAP_EXEC`**

    If [`RIGHT_MEM_MAP`](#rights.mem_map) is set, the right to invoke
    [`mem_map()`](#mem_map) with [`PROT_EXEC`](#mprot.exec).

- <a href="#rights.poll_fd_readwrite" name="rights.poll_fd_readwrite"></a>**`RIGHT_POLL_FD_READWRITE`**

    If [`RIGHT_FD_READ`](#rights.fd_read) is set, includes the right to
    invoke [`poll()`](#poll) and [`poll_fd()`](#poll_fd) to subscribe to
    [`EVENTTYPE_FD_READ`](#eventtype.fd_read).

    If [`RIGHT_FD_WRITE`](#rights.fd_write) is set, includes the right to
    invoke [`poll()`](#poll) and [`poll_fd()`](#poll_fd) to subscribe to
    [`EVENTTYPE_FD_WRITE`](#eventtype.fd_write).

- <a href="#rights.poll_modify" name="rights.poll_modify"></a>**`RIGHT_POLL_MODIFY`**

    The right to modify the events a polling event queue
    is subscribed to.

- <a href="#rights.poll_proc_terminate" name="rights.poll_proc_terminate"></a>**`RIGHT_POLL_PROC_TERMINATE`**

    The right to invoke [`poll()`](#poll) and [`poll_fd()`](#poll_fd) to
    subscribe to [`EVENTTYPE_PROC_TERMINATE`](#eventtype.proc_terminate).

- <a href="#rights.poll_wait" name="rights.poll_wait"></a>**`RIGHT_POLL_WAIT`**

    The right to wait for events on a polling event queue
    and extract them.

- <a href="#rights.proc_exec" name="rights.proc_exec"></a>**`RIGHT_PROC_EXEC`**

    The right to invoke [`proc_exec()`](#proc_exec).

- <a href="#rights.sock_accept" name="rights.sock_accept"></a>**`RIGHT_SOCK_ACCEPT`**

    The right to invoke [`sock_accept()`](#sock_accept).

- <a href="#rights.sock_bind_directory" name="rights.sock_bind_directory"></a>**`RIGHT_SOCK_BIND_DIRECTORY`**

    The right to invoke [`sock_bind()`](#sock_bind) with the file
    descriptor as the directory.

- <a href="#rights.sock_bind_socket" name="rights.sock_bind_socket"></a>**`RIGHT_SOCK_BIND_SOCKET`**

    The right to invoke [`sock_bind()`](#sock_bind) with the file
    descriptor as the socket.

- <a href="#rights.sock_connect_directory" name="rights.sock_connect_directory"></a>**`RIGHT_SOCK_CONNECT_DIRECTORY`**

    The right to invoke [`sock_connect()`](#sock_connect) with the file
    descriptor as the directory.

- <a href="#rights.sock_connect_socket" name="rights.sock_connect_socket"></a>**`RIGHT_SOCK_CONNECT_SOCKET`**

    The right to invoke [`sock_connect()`](#sock_connect) with the file
    descriptor as the socket.

- <a href="#rights.sock_listen" name="rights.sock_listen"></a>**`RIGHT_SOCK_LISTEN`**

    The right to invoke [`sock_listen()`](#sock_listen).

- <a href="#rights.sock_shutdown" name="rights.sock_shutdown"></a>**`RIGHT_SOCK_SHUTDOWN`**

    The right to invoke [`sock_shutdown()`](#sock_shutdown).

- <a href="#rights.sock_stat_get" name="rights.sock_stat_get"></a>**`RIGHT_SOCK_STAT_GET`**

    The right to invoke [`sock_stat_get()`](#sock_stat_get).

#### <a href="#sa_family" name="sa_family"></a>`sa_family_t` (`u8`)

Socket address family.

Used by [`sockaddr_t`](#sockaddr).

Possible values:

- <a href="#sa_family.unspec" name="sa_family.unspec"></a>**`AF_UNSPEC`**

    The socket address family is unknown or is different
    from any of the other address families specified.

- <a href="#sa_family.inet" name="sa_family.inet"></a>**`AF_INET`**

    An IPv4 address.

- <a href="#sa_family.inet6" name="sa_family.inet6"></a>**`AF_INET6`**

    An IPv6 address.

- <a href="#sa_family.unix" name="sa_family.unix"></a>**`AF_UNIX`**

    The socket is local to the system, and may be bound to
    the file system.

#### <a href="#scope" name="scope"></a>`scope_t` (`u8`)

Indicates whether an object is stored in private or shared
memory.

Used by [`subscription_t`](#subscription), [`condvar_signal()`](#condvar_signal), [`lock_unlock()`](#lock_unlock), and [`thread_exit()`](#thread_exit).

Possible values:

- <a href="#scope.private" name="scope.private"></a>**`SCOPE_PRIVATE`**

    The object is stored in private memory.

- <a href="#scope.shared" name="scope.shared"></a>**`SCOPE_SHARED`**

    The object is stored in shared memory.

#### <a href="#sdflags" name="sdflags"></a>`sdflags_t` (`u8` bitfield)

Which channels on a socket need to be shut down.

Used by [`sock_shutdown()`](#sock_shutdown).

Possible values:

- <a href="#sdflags.rd" name="sdflags.rd"></a>**`SHUT_RD`**

    Disables further receive operations.

- <a href="#sdflags.wr" name="sdflags.wr"></a>**`SHUT_WR`**

    Disables further send operations.

#### <a href="#send_in" name="send_in"></a>`send_in_t` (`struct`)

Arguments of [`sock_send()`](#sock_send).

Members:

- <a href="#send_in.si_data" name="send_in.si_data"></a><code><strong>si\_data</strong>: * [ciovec\_t](#ciovec)</code> and <a href="#send_in.si_datalen" name="send_in.si_datalen"></a><code><strong>si\_datalen</strong>: usize</code>

    List of scatter/gather vectors where message data
    should be retrieved.

- <a href="#send_in.si_fds" name="send_in.si_fds"></a><code><strong>si\_fds</strong>: * [fd\_t](#fd)</code> and <a href="#send_in.si_fdslen" name="send_in.si_fdslen"></a><code><strong>si\_fdslen</strong>: usize</code>

    File descriptors that need to be attached to the
    message.

- <a href="#send_in.si_flags" name="send_in.si_flags"></a><code><strong>si\_flags</strong>: [msgflags\_t](#msgflags)</code>

    Message flags. Only [`MSG_EOR`](#msgflags.eor) is valid.

#### <a href="#send_out" name="send_out"></a>`send_out_t` (`struct`)

Results of [`sock_send()`](#sock_send).

Members:

- <a href="#send_out.so_datalen" name="send_out.so_datalen"></a><code><strong>so\_datalen</strong>: usize</code>

    Number of bytes transmitted.

#### <a href="#signal" name="signal"></a>`signal_t` (`u8`)

Signal condition.

Used by [`event_t`](#event) and [`proc_raise()`](#proc_raise).

Possible values:

- <a href="#signal.abrt" name="signal.abrt"></a>**`SIGABRT`**

    Process abort signal.

    Action: Terminates the process.

- <a href="#signal.alrm" name="signal.alrm"></a>**`SIGALRM`**

    Alarm clock.

    Action: Terminates the process.

- <a href="#signal.bus" name="signal.bus"></a>**`SIGBUS`**

    Access to an undefined portion of a memory object.

    Action: Terminates the process.

- <a href="#signal.chld" name="signal.chld"></a>**`SIGCHLD`**

    Child process terminated, stopped, or continued.

    Action: Ignored.

- <a href="#signal.cont" name="signal.cont"></a>**`SIGCONT`**

    Continue executing, if stopped.

    Action: Continues executing, if stopped.

- <a href="#signal.fpe" name="signal.fpe"></a>**`SIGFPE`**

    Erroneous arithmetic operation.

    Action: Terminates the process.

- <a href="#signal.hup" name="signal.hup"></a>**`SIGHUP`**

    Hangup.

    Action: Terminates the process.

- <a href="#signal.ill" name="signal.ill"></a>**`SIGILL`**

    Illegal instruction.

    Action: Terminates the process.

- <a href="#signal.int" name="signal.int"></a>**`SIGINT`**

    Terminale interrupt signal.

    Action: Terminates the process.

- <a href="#signal.kill" name="signal.kill"></a>**`SIGKILL`**

    Kill.

    Action: Terminates the process.

- <a href="#signal.pipe" name="signal.pipe"></a>**`SIGPIPE`**

    Write on a pipe with no one to read it.

    Action: Ignored.

- <a href="#signal.quit" name="signal.quit"></a>**`SIGQUIT`**

    Terminal quit signal.

    Action: Terminates the process.

- <a href="#signal.segv" name="signal.segv"></a>**`SIGSEGV`**

    Invalid memory reference.

    Action: Terminates the process.

- <a href="#signal.stop" name="signal.stop"></a>**`SIGSTOP`**

    Stop executing.

    Action: Stops executing.

- <a href="#signal.sys" name="signal.sys"></a>**`SIGSYS`**

    Bad system call.

    Action: Terminates the process.

- <a href="#signal.term" name="signal.term"></a>**`SIGTERM`**

    Termination signal.

    Action: Terminates the process.

- <a href="#signal.trap" name="signal.trap"></a>**`SIGTRAP`**

    Trace/breakpoint trap.

    Action: Terminates the process.

- <a href="#signal.tstp" name="signal.tstp"></a>**`SIGTSTP`**

    Terminal stop signal.

    Action: Stops executing.

- <a href="#signal.ttin" name="signal.ttin"></a>**`SIGTTIN`**

    Background process attempting read.

    Action: Stops executing.

- <a href="#signal.ttou" name="signal.ttou"></a>**`SIGTTOU`**

    Background process attempting write.

    Action: Stops executing.

- <a href="#signal.urg" name="signal.urg"></a>**`SIGURG`**

    High bandwidth data is available at a socket.

    Action: Ignored.

- <a href="#signal.usr1" name="signal.usr1"></a>**`SIGUSR1`**

    User-defined signal 1.

    Action: Terminates the process.

- <a href="#signal.usr2" name="signal.usr2"></a>**`SIGUSR2`**

    User-defined signal 2.

    Action: Terminates the process.

- <a href="#signal.vtalrm" name="signal.vtalrm"></a>**`SIGVTALRM`**

    Virtual timer expired.

    Action: Terminates the process.

- <a href="#signal.xcpu" name="signal.xcpu"></a>**`SIGXCPU`**

    CPU time limit exceeded.

    Action: Terminates the process.

- <a href="#signal.xfsz" name="signal.xfsz"></a>**`SIGXFSZ`**

    File size limit exceeded.

    Action: Terminates the process.

#### <a href="#sockaddr" name="sockaddr"></a>`sockaddr_t` (`struct`)

Network address of a bound socket or its peer.

Used by [`recv_out_t`](#recv_out) and [`sockstat_t`](#sockstat).

Members:

- <a href="#sockaddr.sa_family" name="sockaddr.sa_family"></a><code><strong>sa\_family</strong>: [sa\_family\_t](#sa_family)</code>

    Address family.

- When `sa_family` is [`AF_INET`](#sa_family.inet):

    - <a href="#sockaddr.sa_inet" name="sockaddr.sa_inet"></a>**`sa_inet()`**

        - <a href="#sockaddr.sa_inet.addr" name="sockaddr.sa_inet.addr"></a><code><strong>addr</strong>: [u8; 4]</code>

            IPv4 address.

        - <a href="#sockaddr.sa_inet.port" name="sockaddr.sa_inet.port"></a><code><strong>port</strong>: u16</code>

            IPv4 port number.

- When `sa_family` is [`AF_INET6`](#sa_family.inet6):

    - <a href="#sockaddr.sa_inet6" name="sockaddr.sa_inet6"></a>**`sa_inet6()`**

        - <a href="#sockaddr.sa_inet6.addr" name="sockaddr.sa_inet6.addr"></a><code><strong>addr</strong>: [u8; 16]</code>

            IPv6 address.

        - <a href="#sockaddr.sa_inet6.port" name="sockaddr.sa_inet6.port"></a><code><strong>port</strong>: u16</code>

            IPv6 port number.

#### <a href="#sockstat" name="sockstat"></a>`sockstat_t` (`struct`)

Socket attributes.

Used by [`sock_accept()`](#sock_accept) and [`sock_stat_get()`](#sock_stat_get).

Members:

- <a href="#sockstat.ss_sockname" name="sockstat.ss_sockname"></a><code><strong>ss\_sockname</strong>: [sockaddr\_t](#sockaddr)</code>

    The address to which this socket is bound.

- <a href="#sockstat.ss_peername" name="sockstat.ss_peername"></a><code><strong>ss\_peername</strong>: [sockaddr\_t](#sockaddr)</code>

    The address to which this socket is connected.

- <a href="#sockstat.ss_error" name="sockstat.ss_error"></a><code><strong>ss\_error</strong>: [errno\_t](#errno)</code>

    Error code of the last completed asynchronous
    operation performed on this socket.

- <a href="#sockstat.ss_state" name="sockstat.ss_state"></a><code><strong>ss\_state</strong>: [sstate\_t](#sstate)</code>

    Flags describing the state of the socket.

#### <a href="#ssflags" name="ssflags"></a>`ssflags_t` (`u8` bitfield)

Specifies which socket attributes need to be altered when
calling [`sock_stat_get()`](#sock_stat_get).

Possible values:

- <a href="#ssflags.clear_error" name="ssflags.clear_error"></a>**`SOCKSTAT_CLEAR_ERROR`**

    Clear [`sockstat_t.ss_error`](#sockstat.ss_error).

#### <a href="#sstate" name="sstate"></a>`sstate_t` (`u32` bitfield)

State of the socket.

Used by [`sockstat_t`](#sockstat).

Possible values:

- <a href="#sstate.acceptconn" name="sstate.acceptconn"></a>**`SOCKSTATE_ACCEPTCONN`**

    [`sock_listen()`](#sock_listen) has been called on the socket. The
    socket is accepting incoming connections.

#### <a href="#subclockflags" name="subclockflags"></a>`subclockflags_t` (`u16` bitfield)

Flags determining how the timestamp provided in
[`subscription_t.clock().timeout`](#subscription.clock.timeout) should be interpreted.

Used by [`subscription_t`](#subscription).

Possible values:

- <a href="#subclockflags.abstime" name="subclockflags.abstime"></a>**`SUBSCRIPTION_CLOCK_ABSTIME`**

    If set, treat the timestamp provided in
    [`subscription_t.clock().timeout`](#subscription.clock.timeout) as an absolute timestamp
    of clock [`subscription_t.clock().clock_id`](#subscription.clock.clock_id).

    If clear, treat the timestamp provided in
    [`subscription_t.clock().timeout`](#subscription.clock.timeout) relative to the current
    time value of clock [`subscription_t.clock().clock_id`](#subscription.clock.clock_id).

#### <a href="#subflags" name="subflags"></a>`subflags_t` (`u16` bitfield)

Flags for [`poll_fd()`](#poll_fd) to determine how to process a
subscription request. These flags are ignored by [`poll()`](#poll).

Used by [`subscription_t`](#subscription).

Possible values:

- <a href="#subflags.add" name="subflags.add"></a>**`SUBSCRIPTION_ADD`**

    Adds and enables the subscription. Implies
    [`SUBSCRIPTION_ENABLE`](#subflags.enable), unless [`SUBSCRIPTION_DISABLE`](#subflags.disable) is
    specified.

- <a href="#subflags.clear" name="subflags.clear"></a>**`SUBSCRIPTION_CLEAR`**

    Sets the event back to the initial state, so that it
    no longer triggers.

- <a href="#subflags.delete" name="subflags.delete"></a>**`SUBSCRIPTION_DELETE`**

    Deletes the subscription.

- <a href="#subflags.disable" name="subflags.disable"></a>**`SUBSCRIPTION_DISABLE`**

    Disables the subscription so that it does not trigger,
    but does not delete it.

- <a href="#subflags.enable" name="subflags.enable"></a>**`SUBSCRIPTION_ENABLE`**

    Enables the subscription so that it can trigger.

- <a href="#subflags.oneshot" name="subflags.oneshot"></a>**`SUBSCRIPTION_ONESHOT`**

    Automatically deletes the subscription once triggered.

#### <a href="#subrwflags" name="subrwflags"></a>`subrwflags_t` (`u16` bitfield)

Flags influencing the method of polling for read or writing on
a file descriptor.

Used by [`subscription_t`](#subscription).

Possible values:

- <a href="#subrwflags.poll" name="subrwflags.poll"></a>**`SUBSCRIPTION_FD_READWRITE_POLL`**

    If set, trigger immediately when polling for reading
    on a regular file, just like the POSIX poll function.
    Otherwise, only trigger when not at the end-of-file.

#### <a href="#subscription" name="subscription"></a>`subscription_t` (`struct`)

Subscription to an event.

Used by [`poll()`](#poll) and [`poll_fd()`](#poll_fd).

Members:

- <a href="#subscription.userdata" name="subscription.userdata"></a><code><strong>userdata</strong>: [userdata\_t](#userdata)</code>

    User-provided value that is attached to the
    subscription in the kernel and returned through
    [`event_t.userdata`](#event.userdata).

- <a href="#subscription.flags" name="subscription.flags"></a><code><strong>flags</strong>: [subflags\_t](#subflags)</code>

    Subscription adjustment flags used by [`poll_fd()`](#poll_fd).
    Ignored by [`poll()`](#poll).

- <a href="#subscription.type" name="subscription.type"></a><code><strong>type</strong>: [eventtype\_t](#eventtype)</code>

    The type of the event to which to subscribe.

    Currently, [`EVENTTYPE_CONDVAR`](#eventtype.condvar),
    [`EVENTTYPE_LOCK_RDLOCK`](#eventtype.lock_rdlock), and [`EVENTTYPE_LOCK_WRLOCK`](#eventtype.lock_wrlock)
    can only be used with [`poll()`](#poll).  It must be provided as
    the first subscription and may only be followed by up
    to one other subscription, having type
    [`EVENTTYPE_CLOCK`](#eventtype.clock) with [`SUBSCRIPTION_CLOCK_ABSTIME`](#subclockflags.abstime).

- When `type` is [`EVENTTYPE_CLOCK`](#eventtype.clock):

    - <a href="#subscription.clock" name="subscription.clock"></a>**`clock()`**

        - <a href="#subscription.clock.identifier" name="subscription.clock.identifier"></a><code><strong>identifier</strong>: [userdata\_t](#userdata)</code>

            The user-defined unique
            identifier of the clock.

        - <a href="#subscription.clock.clock_id" name="subscription.clock.clock_id"></a><code><strong>clock\_id</strong>: [clockid\_t](#clockid)</code>

            The clock against which the
            timestamp should be compared.

        - <a href="#subscription.clock.timeout" name="subscription.clock.timeout"></a><code><strong>timeout</strong>: [timestamp\_t](#timestamp)</code>

            The absolute or relative
            timestamp.

        - <a href="#subscription.clock.precision" name="subscription.clock.precision"></a><code><strong>precision</strong>: [timestamp\_t](#timestamp)</code>

            The amount of time that the
            kernel may wait additionally
            to coalesce with other events.

        - <a href="#subscription.clock.flags" name="subscription.clock.flags"></a><code><strong>flags</strong>: [subclockflags\_t](#subclockflags)</code>

            Flags specifying whether the
            timeout is absolute or
            relative.

- When `type` is [`EVENTTYPE_CONDVAR`](#eventtype.condvar):

    - <a href="#subscription.condvar" name="subscription.condvar"></a>**`condvar()`**

        - <a href="#subscription.condvar.condvar" name="subscription.condvar.condvar"></a><code><strong>condvar</strong>: *mut [condvar\_t](#condvar)</code>

            The condition variable on
            which to wait to be woken up.

        - <a href="#subscription.condvar.lock" name="subscription.condvar.lock"></a><code><strong>lock</strong>: *mut [lock\_t](#lock)</code>

            The lock that will be
            released while waiting.

            The lock will be reacquired
            for writing when the condition
            variable triggers.

        - <a href="#subscription.condvar.condvar_scope" name="subscription.condvar.condvar_scope"></a><code><strong>condvar\_scope</strong>: [scope\_t](#scope)</code>

            Whether the condition variable
            is stored in private or shared
            memory.

        - <a href="#subscription.condvar.lock_scope" name="subscription.condvar.lock_scope"></a><code><strong>lock\_scope</strong>: [scope\_t](#scope)</code>

            Whether the lock is stored in
            private or shared memory.

- When `type` is [`EVENTTYPE_FD_READ`](#eventtype.fd_read) or [`EVENTTYPE_FD_WRITE`](#eventtype.fd_write):

    - <a href="#subscription.fd_readwrite" name="subscription.fd_readwrite"></a>**`fd_readwrite()`**

        - <a href="#subscription.fd_readwrite.fd" name="subscription.fd_readwrite.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

            The file descriptor on which
            to wait for it to become ready
            for reading or writing.

        - <a href="#subscription.fd_readwrite.flags" name="subscription.fd_readwrite.flags"></a><code><strong>flags</strong>: [subrwflags\_t](#subrwflags)</code>

            Under which conditions to
            trigger.

- When `type` is [`EVENTTYPE_LOCK_RDLOCK`](#eventtype.lock_rdlock) or [`EVENTTYPE_LOCK_WRLOCK`](#eventtype.lock_wrlock):

    - <a href="#subscription.lock" name="subscription.lock"></a>**`lock()`**

        - <a href="#subscription.lock.lock" name="subscription.lock.lock"></a><code><strong>lock</strong>: *mut [lock\_t](#lock)</code>

            The lock that will be acquired
            for reading or writing.

        - <a href="#subscription.lock.lock_scope" name="subscription.lock.lock_scope"></a><code><strong>lock\_scope</strong>: [scope\_t](#scope)</code>

            Whether the lock is stored in
            private or shared memory.

- When `type` is [`EVENTTYPE_PROC_TERMINATE`](#eventtype.proc_terminate):

    - <a href="#subscription.proc_terminate" name="subscription.proc_terminate"></a>**`proc_terminate()`**

        - <a href="#subscription.proc_terminate.fd" name="subscription.proc_terminate.fd"></a><code><strong>fd</strong>: [fd\_t](#fd)</code>

            The process descriptor on
            which to wait for process
            termination.

#### <a href="#tcb" name="tcb"></a>`tcb_t` (`struct`)

The Thread Control Block (TCB).

After a thread begins execution (at program startup or when
created through [`thread_create()`](#thread_create)), the CPU's registers
controlling Thread-Local Storage (TLS) will already be
initialized. They will point to an area only containing the
TCB.

If the thread needs space for storing thread-specific
variables, the thread may allocate a larger area and adjust
the CPU's registers to point to that area instead. However, it
does need to make sure that the TCB is copied over to the new
TLS area.

The purpose of the TCB is that it allows light-weight
emulators to store information related to individual threads.
For example, it may be used to store a copy of the CPU
registers prior emulation, so that TLS for the host system
can be restored if needed.

Members:

- <a href="#tcb.parent" name="tcb.parent"></a><code><strong>parent</strong>: *mut c\_void</code>

    Pointer that may be freely assigned by the system. Its
    value cannot be interpreted by the application.

#### <a href="#threadattr" name="threadattr"></a>`threadattr_t` (`struct`)

Attributes for thread creation.

Used by [`thread_create()`](#thread_create).

Members:

- <a href="#threadattr.entry_point" name="threadattr.entry_point"></a><code><strong>entry\_point</strong>: * [threadentry\_t](#threadentry)</code>

    Initial program counter value.

- <a href="#threadattr.stack" name="threadattr.stack"></a><code><strong>stack</strong>: *mut c\_void</code> and <a href="#threadattr.stack_size" name="threadattr.stack_size"></a><code><strong>stack\_size</strong>: usize</code>

    Region allocated to serve as stack space.

- <a href="#threadattr.argument" name="threadattr.argument"></a><code><strong>argument</strong>: *mut c\_void</code>

    Argument to be forwarded to the entry point function.

#### <a href="#threadentry" name="threadentry"></a>`threadentry_t` (function type)

Entry point for additionally created threads.

Used by [`threadattr_t`](#threadattr).

Parameters:

- <a href="#threadentry.tid" name="threadentry.tid"></a><code><strong>tid</strong>: [tid\_t](#tid)</code>

    Thread ID of the current thread.

- <a href="#threadentry.aux" name="threadentry.aux"></a><code><strong>aux</strong>: *mut c\_void</code>

    Copy of the value stored in
    [`threadattr_t.argument`](#threadattr.argument).

#### <a href="#tid" name="tid"></a>`tid_t` (`u32`)

Unique system-local identifier of a thread. This identifier is
only valid during the lifetime of the thread.

Threads must be aware of their thread identifier, as it is
written it into locks when acquiring them for writing. It is
not advised to use these identifiers for any other purpose.

Used by [`threadentry_t`](#threadentry), [`proc_fork()`](#proc_fork), and [`thread_create()`](#thread_create).

#### <a href="#timestamp" name="timestamp"></a>`timestamp_t` (`u64`)

Timestamp in nanoseconds.

Used by [`filestat_t`](#filestat), [`subscription_t`](#subscription), [`clock_res_get()`](#clock_res_get), and [`clock_time_get()`](#clock_time_get).

#### <a href="#ulflags" name="ulflags"></a>`ulflags_t` (`u8` bitfield)

Specifies whether files are unlinked or directories are
removed.

Used by [`file_unlink()`](#file_unlink).

Possible values:

- <a href="#ulflags.removedir" name="ulflags.removedir"></a>**`UNLINK_REMOVEDIR`**

    If set, removes a directory. Otherwise, unlinks any
    non-directory file.

#### <a href="#userdata" name="userdata"></a>`userdata_t` (`u64`)

User-provided value that can be attached to objects that is
retained when extracted from the kernel.

Used by [`event_t`](#event) and [`subscription_t`](#subscription).

#### <a href="#whence" name="whence"></a>`whence_t` (`u8`)

Relative to which position the offset of the file descriptor
should be set.

Used by [`fd_seek()`](#fd_seek).

Possible values:

- <a href="#whence.cur" name="whence.cur"></a>**`WHENCE_CUR`**

    Seek relative to current position.

- <a href="#whence.end" name="whence.end"></a>**`WHENCE_END`**

    Seek relative to end-of-file.

- <a href="#whence.set" name="whence.set"></a>**`WHENCE_SET`**

    Seek relative to start-of-file.

